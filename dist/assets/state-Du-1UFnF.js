import{r as t,R as e}from"./vendor-pzx2GZZt.js";const n={};function r(t){return"init"in t}function o(t){return!!t.write}function i(t){return"v"in t||"e"in t}function s(t){if("e"in t)throw t.e;if("production"!==(n?"production":void 0)&&!("v"in t))throw new Error("[Bug] atom state is not initialized");return t.v}const c=new WeakMap;function a(t){var e;return l(t)&&!!(null==(e=c.get(t))?void 0:e[0])}function u(t,e){let n=c.get(t);if(!n){n=[!0,new Set],c.set(t,n);const e=()=>{n[0]=!1};t.then(e,e)}n[1].add(e)}function l(t){return"function"==typeof(null==t?void 0:t.then)}function f(t,e,n){if(!n.p.has(t)){n.p.add(t);const r=()=>n.p.delete(t);e.then(r,r)}}function d(t,e,n){var r;const o=new Set;for(const i of(null==(r=n.get(t))?void 0:r.t)||[])n.has(i)&&o.add(i);for(const i of e.p)o.add(i);return o}const p=(t,e,...n)=>e.read(...n),_=(t,e,...n)=>e.write(...n),h=(t,e)=>{var n;return null==(n=e.unstable_onInit)?void 0:n.call(e,t)},y=(t,e,n)=>{var r;return null==(r=e.onMount)?void 0:r.call(e,n)},v=(t,e)=>{const r=M(t),o=r[0],i=r[9];if("production"!==(n?"production":void 0)&&!e)throw new Error("Atom is undefined or null");let s=o.get(e);return s||(s={d:new Map,p:new Set,n:0},o.set(e,s),null==i||i(t,e)),s},b=t=>{const e=M(t),n=e[1],r=e[3],o=e[4],i=e[5],s=e[6],c=e[13],a=[],u=t=>{try{t()}catch(e){a.push(e)}};do{s.f&&u(s.f);const e=new Set,a=e.add.bind(e);r.forEach(t=>{var e;return null==(e=n.get(t))?void 0:e.l.forEach(a)}),r.clear(),i.forEach(a),i.clear(),o.forEach(a),o.clear(),e.forEach(u),r.size&&c(t)}while(r.size||i.size||o.size);if(a.length)throw new AggregateError(a)},g=t=>{const e=M(t),r=e[1],o=e[2],i=e[3],s=e[11],c=e[14],a=e[17],u=[],l=new WeakSet,f=new WeakSet,p=Array.from(i);for(;p.length;){const e=p[p.length-1],i=s(t,e);if(f.has(e))p.pop();else if(l.has(e)){if(o.get(e)===i.n)u.push([e,i]);else if("production"!==(n?"production":void 0)&&o.has(e))throw new Error("[Bug] invalidated atom exists");f.add(e),p.pop()}else{l.add(e);for(const t of d(e,i,r))l.has(t)||p.push(t)}}for(let n=u.length-1;n>=0;--n){const[e,r]=u[n];let s=!1;for(const t of r.d.keys())if(t!==e&&i.has(t)){s=!0;break}s&&(c(t,e),a(t,e)),o.delete(e)}},w=(t,e)=>{var c,d;const p=M(t),_=p[1],h=p[2],y=p[3],v=p[6],b=p[7],g=p[11],w=p[12],m=p[13],S=p[14],O=p[16],P=p[17],z=g(t,e);if(i(z)){if(_.has(e)&&h.get(e)!==z.n)return z;if(Array.from(z.d).every(([e,n])=>S(t,e).n===n))return z}z.d.clear();let j,A,k=!0;function F(){_.has(e)&&(P(t,e),m(t),w(t))}const I={get signal(){return j||(j=new AbortController),j.signal},get setSelf(){return"production"!==(n?"production":void 0)&&o(e),!A&&o(e)&&(A=(...n)=>{if(!k)try{return O(t,e,...n)}finally{m(t),w(t)}}),A}},D=z.n;try{const n=b(t,e,function(n){var o;if(n===e){const e=g(t,n);if(!i(e)){if(!r(n))throw new Error("no atom init");E(t,n,n.init)}return s(e)}const c=S(t,n);try{return s(c)}finally{z.d.set(n,c.n),a(z.v)&&f(e,z.v,c),null==(o=_.get(n))||o.t.add(e),k||F()}},I);return E(t,e,n),l(n)&&(u(n,()=>null==j?void 0:j.abort()),n.then(F,F)),null==(c=v.r)||c.call(v,e),z}catch(T){return delete z.v,z.e=T,++z.n,z}finally{k=!1,D!==z.n&&h.get(e)===D&&(h.set(e,z.n),y.add(e),null==(d=v.c)||d.call(v,e))}},m=(t,e)=>{const n=M(t),r=n[1],o=n[2],i=n[11],s=[e];for(;s.length;){const e=s.pop(),n=i(t,e);for(const c of d(e,n,r)){const e=i(t,c);o.set(c,e.n),s.push(c)}}},S=(t,e,...n)=>{const o=M(t),i=o[3],c=o[6],a=o[8],u=o[11],l=o[12],f=o[13],d=o[14],p=o[15],_=o[17];let h=!0;const y=e=>s(d(t,e)),v=(n,...o)=>{var s;const a=u(t,n);try{if(n===e){if(!r(n))throw new Error("atom not writable");const e=a.n,u=o[0];return E(t,n,u),_(t,n),void(e!==a.n&&(i.add(n),null==(s=c.c)||s.call(c,n),p(t,n)))}return S(t,n,...o)}finally{h||(f(t),l(t))}};try{return a(t,e,y,v,...n)}finally{h=!1}},O=(t,e)=>{var n;const r=M(t),o=r[1],i=r[3],s=r[6],c=r[11],u=r[15],l=r[18],f=r[19],d=c(t,e),p=o.get(e);if(p&&!a(d.v)){for(const[r,o]of d.d)if(!p.d.has(r)){const a=c(t,r);l(t,r).t.add(e),p.d.add(r),o!==a.n&&(i.add(r),null==(n=s.c)||n.call(s,r),u(t,r))}for(const n of p.d||[])if(!d.d.has(n)){p.d.delete(n);const r=f(t,n);null==r||r.t.delete(e)}}},P=(t,e)=>{var n;const r=M(t),i=r[1],s=r[4],c=r[6],a=r[10],u=r[11],l=r[12],f=r[13],d=r[14],p=r[16],_=u(t,e);let h=i.get(e);if(!h){d(t,e);for(const n of _.d.keys()){P(t,n).t.add(e)}if(h={l:new Set,d:new Set(_.d.keys()),t:new Set},i.set(e,h),null==(n=c.m)||n.call(c,e),o(e)){const n=()=>{let n=!0;const r=(...r)=>{try{return p(t,e,...r)}finally{n||(f(t),l(t))}};try{const o=a(t,e,r);o&&(h.u=()=>{n=!0;try{o()}finally{n=!1}})}finally{n=!1}};s.add(n)}}return h},z=(t,e)=>{var n;const r=M(t),o=r[1],i=r[5],s=r[6],c=r[11],a=r[19],u=c(t,e);let l=o.get(e);if(!l||l.l.size||Array.from(l.t).some(t=>{var n;return null==(n=o.get(t))?void 0:n.d.has(e)}))return l;l.u&&i.add(l.u),l=void 0,o.delete(e),null==(n=s.u)||n.call(s,e);for(const f of u.d.keys()){const n=a(t,f);null==n||n.t.delete(e)}},E=(t,e,n)=>{const r=M(t)[11],o=r(t,e),i="v"in o,s=o.v;if(l(n))for(const c of o.d.keys())f(e,n,r(t,c));o.v=n,delete o.e,i&&Object.is(s,o.v)||(++o.n,l(s)&&function(t){const e=c.get(t);(null==e?void 0:e[0])&&(e[0]=!1,e[1].forEach(t=>t()))}(s))},j=(t,e)=>s((0,M(t)[14])(t,e)),A=(t,e,...n)=>{const r=M(t),o=r[12],i=r[13],s=r[16];try{return s(t,e,...n)}finally{i(t),o(t)}},k=(t,e,n)=>{const r=M(t),o=r[12],i=r[18],s=r[19],c=i(t,e).l;return c.add(n),o(t),()=>{c.delete(n),s(t,e),o(t)}},F=new WeakMap,M=t=>{const e=F.get(t);if("production"!==(n?"production":void 0)&&!e)throw new Error("Store must be created by buildStore to read its building blocks");return e};const I={};let D,T=0;function C(t,e){const n="atom"+ ++T,r={toString(){return"production"!==(I?"production":void 0)&&this.debugLabel?n+":"+this.debugLabel:n}};return"function"==typeof t?r.read=t:(r.init=t,r.read=R,r.write=W),e&&(r.write=e),r}function R(t){return t(this)}function W(t,e,n){return e(this,"function"==typeof n?n(t(this)):n)}function U(){return function(...t){const e={get:t=>(0,M(e)[21])(e,t),set:(t,...n)=>(0,M(e)[22])(e,t,...n),sub:(t,n)=>(0,M(e)[23])(e,t,n)},n=[new WeakMap,new WeakMap,new WeakMap,new Set,new Set,new Set,{},p,_,h,y,v,b,g,w,m,S,O,P,z,E,j,A,k,void 0].map((e,n)=>t[n]||e);return F.set(e,Object.freeze(n)),e}()}const x={},L=t.createContext(void 0);function N(e){return t.useContext(L)||(D||(D=U(),"production"!==(I?"production":void 0)&&(globalThis.__JOTAI_DEFAULT_STORE__||(globalThis.__JOTAI_DEFAULT_STORE__=D),globalThis.__JOTAI_DEFAULT_STORE__)),D)}function K({children:e,store:n}){const r=t.useRef(null);return n?t.createElement(L.Provider,{value:n},e):(null===r.current&&(r.current=U()),t.createElement(L.Provider,{value:r.current},e))}const J=t=>"function"==typeof(null==t?void 0:t.then),B=t=>{t.status||(t.status="pending",t.then(e=>{t.status="fulfilled",t.value=e},e=>{t.status="rejected",t.reason=e}))},V=e.use||(t=>{if("pending"===t.status)throw t;if("fulfilled"===t.status)return t.value;throw"rejected"===t.status?t.reason:(B(t),t)}),X=new WeakMap,$=(t,e)=>{let n=X.get(t);return n||(n=new Promise((r,o)=>{let i=t;const s=t=>e=>{i===t&&r(e)},c=t=>e=>{i===t&&o(e)},a=()=>{try{const t=e();J(t)?(X.set(t,n),i=t,t.then(s(t),c(t)),u(t,a)):r(t)}catch(t){o(t)}};t.then(s(t),c(t)),u(t,a)}),X.set(t,n)),n};function q(n,r){const{delay:o,unstable_promiseStatus:i=!e.use}={},s=N(),[[c,a,u],l]=t.useReducer(t=>{const e=s.get(n);return Object.is(t[0],e)&&t[1]===s&&t[2]===n?t:[e,s,n]},void 0,()=>[s.get(n),s,n]);let f=c;if(a===s&&u===n||(l(),f=s.get(n)),t.useEffect(()=>{const t=s.sub(n,()=>{if(i)try{const t=s.get(n);J(t)&&B($(t,()=>s.get(n)))}catch(t){}"number"!=typeof o?l():setTimeout(l,o)});return l(),t},[s,n,o,i]),t.useDebugValue(f),J(f)){const t=$(f,()=>s.get(n));return i&&B(t),V(t)}return f}function G(e,n){const r=N();return t.useCallback((...t)=>{if("production"!==(x?"production":void 0)&&!("write"in e))throw new Error("not writable atom");return r.set(e,...t)},[r,e])}function H(t,e){return[q(t),G(t)]}var Q=Symbol.for("immer-nothing"),Y=Symbol.for("immer-draftable"),Z=Symbol.for("immer-state");function tt(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var et=Object.getPrototypeOf;function nt(t){return!!t&&!!t[Z]}function rt(t){return!!t&&(st(t)||Array.isArray(t)||!!t[Y]||!!t.constructor?.[Y]||ft(t)||dt(t))}var ot=Object.prototype.constructor.toString(),it=new WeakMap;function st(t){if(!t||"object"!=typeof t)return!1;const e=Object.getPrototypeOf(t);if(null===e||e===Object.prototype)return!0;const n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;if(n===Object)return!0;if("function"!=typeof n)return!1;let r=it.get(n);return void 0===r&&(r=Function.toString.call(n),it.set(n,r)),r===ot}function ct(t,e,n=!0){if(0===at(t)){(n?Reflect.ownKeys(t):Object.keys(t)).forEach(n=>{e(n,t[n],t)})}else t.forEach((n,r)=>e(r,n,t))}function at(t){const e=t[Z];return e?e.type_:Array.isArray(t)?1:ft(t)?2:dt(t)?3:0}function ut(t,e){return 2===at(t)?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function lt(t,e,n){const r=at(t);2===r?t.set(e,n):3===r?t.add(n):t[e]=n}function ft(t){return t instanceof Map}function dt(t){return t instanceof Set}function pt(t){return t.copy_||t.base_}function _t(t,e){if(ft(t))return new Map(t);if(dt(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const n=st(t);if(!0===e||"class_only"===e&&!n){const e=Object.getOwnPropertyDescriptors(t);delete e[Z];let n=Reflect.ownKeys(e);for(let r=0;r<n.length;r++){const o=n[r],i=e[o];!1===i.writable&&(i.writable=!0,i.configurable=!0),(i.get||i.set)&&(e[o]={configurable:!0,writable:!0,enumerable:i.enumerable,value:t[o]})}return Object.create(et(t),e)}{const e=et(t);if(null!==e&&n)return{...t};const r=Object.create(e);return Object.assign(r,t)}}function ht(t,e=!1){return vt(t)||nt(t)||!rt(t)||(at(t)>1&&Object.defineProperties(t,{set:yt,add:yt,clear:yt,delete:yt}),Object.freeze(t),e&&Object.values(t).forEach(t=>ht(t,!0))),t}var yt={value:function(){tt(2)}};function vt(t){return null===t||"object"!=typeof t||Object.isFrozen(t)}var bt,gt={};function wt(t){const e=gt[t];return e||tt(0),e}function mt(){return bt}function St(t,e){e&&(wt("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function Ot(t){Pt(t),t.drafts_.forEach(Et),t.drafts_=null}function Pt(t){t===bt&&(bt=t.parent_)}function zt(t){return bt={drafts_:[],parent_:bt,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Et(t){const e=t[Z];0===e.type_||1===e.type_?e.revoke_():e.revoked_=!0}function jt(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];return void 0!==t&&t!==n?(n[Z].modified_&&(Ot(e),tt(4)),rt(t)&&(t=At(e,t),e.parent_||Ft(e,t)),e.patches_&&wt("Patches").generateReplacementPatches_(n[Z].base_,t,e.patches_,e.inversePatches_)):t=At(e,n,[]),Ot(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==Q?t:void 0}function At(t,e,n){if(vt(e))return e;const r=t.immer_.shouldUseStrictIteration(),o=e[Z];if(!o)return ct(e,(r,i)=>kt(t,o,e,r,i,n),r),e;if(o.scope_!==t)return e;if(!o.modified_)return Ft(t,o.base_,!0),o.base_;if(!o.finalized_){o.finalized_=!0,o.scope_.unfinalizedDrafts_--;const e=o.copy_;let i=e,s=!1;3===o.type_&&(i=new Set(e),e.clear(),s=!0),ct(i,(r,i)=>kt(t,o,e,r,i,n,s),r),Ft(t,e,!1),n&&t.patches_&&wt("Patches").generatePatches_(o,n,t.patches_,t.inversePatches_)}return o.copy_}function kt(t,e,n,r,o,i,s){if(null==o)return;if("object"!=typeof o&&!s)return;const c=vt(o);if(!c||s){if(nt(o)){const s=At(t,o,i&&e&&3!==e.type_&&!ut(e.assigned_,r)?i.concat(r):void 0);if(lt(n,r,s),!nt(s))return;t.canAutoFreeze_=!1}else s&&n.add(o);if(rt(o)&&!c){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;if(e&&e.base_&&e.base_[r]===o&&c)return;At(t,o),e&&e.scope_.parent_||"symbol"==typeof r||!(ft(n)?n.has(r):Object.prototype.propertyIsEnumerable.call(n,r))||Ft(t,o)}}}function Ft(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&ht(e,n)}var Mt={get(t,e){if(e===Z)return t;const n=pt(t);if(!ut(n,e))return function(t,e,n){const r=Tt(e,n);return r?"value"in r?r.value:r.get?.call(t.draft_):void 0}(t,n,e);const r=n[e];return t.finalized_||!rt(r)?r:r===Dt(t.base_,e)?(Rt(t),t.copy_[e]=Wt(r,t)):r},has:(t,e)=>e in pt(t),ownKeys:t=>Reflect.ownKeys(pt(t)),set(t,e,n){const r=Tt(pt(t),e);if(r?.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const r=Dt(pt(t),e),s=r?.[Z];if(s&&s.base_===n)return t.copy_[e]=n,t.assigned_[e]=!1,!0;if(((o=n)===(i=r)?0!==o||1/o==1/i:o!=o&&i!=i)&&(void 0!==n||ut(t.base_,e)))return!0;Rt(t),Ct(t)}var o,i;return t.copy_[e]===n&&(void 0!==n||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_[e]=!0),!0},deleteProperty:(t,e)=>(void 0!==Dt(t.base_,e)||e in t.base_?(t.assigned_[e]=!1,Rt(t),Ct(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0),getOwnPropertyDescriptor(t,e){const n=pt(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r?{writable:!0,configurable:1!==t.type_||"length"!==e,enumerable:r.enumerable,value:n[e]}:r},defineProperty(){tt(11)},getPrototypeOf:t=>et(t.base_),setPrototypeOf(){tt(12)}},It={};function Dt(t,e){const n=t[Z];return(n?pt(n):t)[e]}function Tt(t,e){if(!(e in t))return;let n=et(t);for(;n;){const t=Object.getOwnPropertyDescriptor(n,e);if(t)return t;n=et(n)}}function Ct(t){t.modified_||(t.modified_=!0,t.parent_&&Ct(t.parent_))}function Rt(t){t.copy_||(t.copy_=_t(t.base_,t.scope_.immer_.useStrictShallowCopy_))}ct(Mt,(t,e)=>{It[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}}),It.deleteProperty=function(t,e){return It.set.call(this,t,e,void 0)},It.set=function(t,e,n){return Mt.set.call(this,t[0],e,n,t[0])};function Wt(t,e){const n=ft(t)?wt("MapSet").proxyMap_(t,e):dt(t)?wt("MapSet").proxySet_(t,e):function(t,e){const n=Array.isArray(t),r={type_:n?1:0,scope_:e?e.scope_:mt(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let o=r,i=Mt;n&&(o=[r],i=It);const{revoke:s,proxy:c}=Proxy.revocable(o,i);return r.draft_=c,r.revoke_=s,c}(t,e);return(e?e.scope_:mt()).drafts_.push(n),n}function Ut(t){if(!rt(t)||vt(t))return t;const e=t[Z];let n,r=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=_t(t,e.scope_.immer_.useStrictShallowCopy_),r=e.scope_.immer_.shouldUseStrictIteration()}else n=_t(t,!0);return ct(n,(t,e)=>{lt(n,t,Ut(e))},r),e&&(e.finalized_=!1),n}var xt=(new class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(t,e,n)=>{if("function"==typeof t&&"function"!=typeof e){const n=e;e=t;const r=this;return function(t=n,...o){return r.produce(t,t=>e.call(this,t,...o))}}let r;if("function"!=typeof e&&tt(6),void 0!==n&&"function"!=typeof n&&tt(7),rt(t)){const o=zt(this),i=Wt(t,void 0);let s=!0;try{r=e(i),s=!1}finally{s?Ot(o):Pt(o)}return St(o,n),jt(r,o)}if(!t||"object"!=typeof t){if(r=e(t),void 0===r&&(r=t),r===Q&&(r=void 0),this.autoFreeze_&&ht(r,!0),n){const e=[],o=[];wt("Patches").generateReplacementPatches_(t,r,e,o),n(e,o)}return r}tt(1)},this.produceWithPatches=(t,e)=>{if("function"==typeof t)return(e,...n)=>this.produceWithPatches(e,e=>t(e,...n));let n,r;return[this.produce(t,e,(t,e)=>{n=t,r=e}),n,r]},"boolean"==typeof t?.autoFreeze&&this.setAutoFreeze(t.autoFreeze),"boolean"==typeof t?.useStrictShallowCopy&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),"boolean"==typeof t?.useStrictIteration&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){rt(t)||tt(8),nt(t)&&(t=function(t){nt(t)||tt(10);return Ut(t)}(t));const e=zt(this),n=Wt(t,void 0);return n[Z].isManual_=!0,Pt(e),n}finishDraft(t,e){const n=t&&t[Z];n&&n.isManual_||tt(9);const{scope_:r}=n;return St(r,e),jt(void 0,r)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,e){let n;for(n=e.length-1;n>=0;n--){const r=e[n];if(0===r.path.length&&"replace"===r.op){t=r.value;break}}n>-1&&(e=e.slice(n+1));const r=wt("Patches").applyPatches_;return nt(t)?r(t,e):this.produce(t,t=>r(t,e))}}).produce;function Lt(t){const e=C(t,(t,n,r)=>n(e,xt(t(e),"function"==typeof r?r:()=>r)));return e}export{K as P,C as a,Lt as b,H as u};
