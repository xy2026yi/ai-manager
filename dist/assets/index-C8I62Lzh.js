import{r as e,a as t,R as s}from"./vendor-pzx2GZZt.js";import{u as r,a,L as n,B as l,R as i,b as d,N as c}from"./router-BmWD9oH-.js";import{a as o,b as x,u as m,P as h}from"./state-Du-1UFnF.js";import{q as u,_ as g}from"./ui-b5mS1Bfr.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const s of e)if("childList"===s.type)for(const e of s.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var y={exports:{}},p={},j=e,f=Symbol.for("react.element"),b=Symbol.for("react.fragment"),v=Object.prototype.hasOwnProperty,N=j.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,w={key:!0,ref:!0,__self:!0,__source:!0};function k(e,t,s){var r,a={},n=null,l=null;for(r in void 0!==s&&(n=""+s),void 0!==t.key&&(n=""+t.key),void 0!==t.ref&&(l=t.ref),t)v.call(t,r)&&!w.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:f,type:e,key:n,ref:l,props:a,_owner:N.current}}p.Fragment=b,p.jsx=k,p.jsxs=k,y.exports=p;var C=y.exports,E={},_=t;E.createRoot=_.createRoot,E.hydrateRoot=_.hydrateRoot;const S={},I=Symbol("production"!==(S?"production":void 0)?"RESET":""),M=e=>"function"==typeof(null==e?void 0:e.then);const T=function(e=()=>{try{return window.localStorage}catch(e){return}},t){var s;let r,a;const n={getItem:(s,n)=>{var l,i;const d=e=>{if(r!==(e=e||"")){try{a=JSON.parse(e,null==t?void 0:t.reviver)}catch(s){return n}r=e}return a},c=null!=(i=null==(l=e())?void 0:l.getItem(s))?i:null;return M(c)?c.then(d):d(c)},setItem:(t,s)=>{var r;return null==(r=e())?void 0:r.setItem(t,JSON.stringify(s,void 0))},removeItem:t=>{var s;return null==(s=e())?void 0:s.removeItem(t)}};let l;try{l=null==(s=e())?void 0:s.subscribe}catch(d){}var i;return!l&&"undefined"!=typeof window&&"function"==typeof window.addEventListener&&window.Storage&&(l=(t,s)=>{if(!(e()instanceof window.Storage))return()=>{};const r=r=>{r.storageArea===e()&&r.key===t&&s(r.newValue)};return window.addEventListener("storage",r),()=>{window.removeEventListener("storage",r)}}),l&&(n.subscribe=(i=l,(e,t,s)=>i(e,e=>{let r;try{r=JSON.parse(e||"")}catch(d){r=s}t(r)}))),n}();const A=function(e,t,s=T){const r=o(t);return"production"!==(S?"production":void 0)&&(r.debugPrivate=!0),r.onMount=r=>{let a;return r(s.getItem(e,t)),s.subscribe&&(a=s.subscribe(e,r,t)),a},o(e=>e(r),(a,n,l)=>{const i="function"==typeof l?l(a(r)):l;return i===I?(n(r,t),s.removeItem(e)):M(i)?i.then(t=>(n(r,t),s.setItem(e,t))):(n(r,i),s.setItem(e,i))})}("theme","light"),O=o(!1);o(!1);const L=o([]);o(null);const z=o(!1),P=o(null),R=o(0),H=o(null),$=o(null);o(!1),o({page:1,limit:20,search:"",active_only:!1});const B=o(null),D=o(null),q=o(null);o(!1),o({page:1,limit:20,search:"",active_only:!1});const W=o(null),F=o(null),U=o(null);o(!1),o({page:1,limit:20,search:"",guide_type:""});const V=o(null),Z=o(null),J=o(null);o(!1),o({page:1,limit:20,search:"",server_type:"",active_only:!1});const K=o(null),Y=o(null),G=o(null);o(!1),o({page:1,limit:20,search:"",category:"",active_only:!1});const X=o(null);var Q,ee;o({isOpen:!1,mode:"create"}),o({isOpen:!1,mode:"create"}),o({isOpen:!1,mode:"create"}),o({isOpen:!1,mode:"create"}),o({isOpen:!1,mode:"create"}),x(new Map),"function"==typeof SuppressedError&&SuppressedError,function(e){e[e.Audio=1]="Audio",e[e.Cache=2]="Cache",e[e.Config=3]="Config",e[e.Data=4]="Data",e[e.LocalData=5]="LocalData",e[e.Document=6]="Document",e[e.Download=7]="Download",e[e.Picture=8]="Picture",e[e.Public=9]="Public",e[e.Video=10]="Video",e[e.Resource=11]="Resource",e[e.Temp=12]="Temp",e[e.AppConfig=13]="AppConfig",e[e.AppData=14]="AppData",e[e.AppLocalData=15]="AppLocalData",e[e.AppCache=16]="AppCache",e[e.AppLog=17]="AppLog",e[e.Desktop=18]="Desktop",e[e.Executable=19]="Executable",e[e.Font=20]="Font",e[e.Home=21]="Home",e[e.Runtime=22]="Runtime",e[e.Template=23]="Template"}(Q||(Q={})),function(e){e[e.Start=0]="Start",e[e.Current=1]="Current",e[e.End=2]="End"}(ee||(ee={}));class te extends Error{constructor(e,t,s){super(t),this.code=e,this.details=s,this.name="ApiError"}}class se{static async handleResponse(e){if(!e.ok){const t=await e.json().catch(()=>({success:!1,error:{code:e.status.toString(),message:e.statusText||"网络请求失败"},timestamp:(new Date).toISOString()}));throw new te(t.error.code,t.error.message,t.error.details)}const t=await e.json();if(!t.success)throw new te("API_ERROR",t.message||"请求失败",t);return t.data}static handleError(e){if(e instanceof te)throw e;if("TypeError"===e.name&&e.message.includes("fetch"))throw new te("NETWORK_ERROR","网络连接失败，请检查网络设置");if("AbortError"===e.name)throw new te("TIMEOUT","请求超时，请稍后重试");throw new te("UNKNOWN_ERROR","未知错误，请稍后重试",e)}}class re{baseUrl;defaultTimeout;constructor(e="http://127.0.0.1:8080/api/v1",t=3e4){this.baseUrl=e,this.defaultTimeout=t}async request(e,t={}){const s=`${this.baseUrl}${e}`,r=new AbortController,a=setTimeout(()=>r.abort(),t.timeout||this.defaultTimeout);try{const e=await fetch(s,{method:t.method||"GET",headers:{"Content-Type":"application/json",...t.headers},body:t.body?JSON.stringify(t.body):void 0,signal:r.signal});return clearTimeout(a),se.handleResponse(e)}catch(n){return clearTimeout(a),se.handleError(n)}}get(e,t){let s=e;if(t){const e=new URLSearchParams;Object.entries(t).forEach(([t,s])=>{null!=s&&e.append(t,String(s))}),s+=`?${e.toString()}`}return this.request(s)}post(e,t){return this.request(e,{method:"POST",body:t})}put(e,t){return this.request(e,{method:"PUT",body:t})}delete(e){return this.request(e,{method:"DELETE"})}}class ae extends re{async list(e){return this.get("/claude-providers",e)}async getById(e){return this.get(`/claude-providers/${e}`)}async create(e){return this.post("/claude-providers",e)}async update(e,t){return this.put(`/claude-providers/${e}`,t)}async deleteById(e){return this.delete(`/claude-providers/${e}`)}async testConnection(e){return this.get(`/claude-providers/${e}/test`)}async getStats(){return this.get("/claude-providers/stats")}}class ne extends re{async list(e){return this.get("/codex-providers",e)}async getById(e){return this.get(`/codex-providers/${e}`)}async create(e){return this.post("/codex-providers",e)}async update(e,t){return this.put(`/codex-providers/${e}`,t)}async deleteById(e){return this.delete(`/codex-providers/${e}`)}async testConnection(e){return this.get(`/codex-providers/${e}/test`)}async getStats(){return this.get("/codex-providers/stats")}}class le extends re{async list(e){return this.get("/agent-guides",e)}async getById(e){return this.get(`/agent-guides/${e}`)}async create(e){return this.post("/agent-guides",e)}async update(e,t){return this.put(`/agent-guides/${e}`,t)}async deleteById(e){return this.delete(`/agent-guides/${e}`)}async validate(e){return this.get(`/agent-guides/${e}/validate`)}async getStats(){return this.get("/agent-guides/stats")}}class ie extends re{async list(e){return this.get("/mcp-servers",e)}async getById(e){return this.get(`/mcp-servers/${e}`)}async create(e){return this.post("/mcp-servers",e)}async update(e,t){return this.put(`/mcp-servers/${e}`,t)}async deleteById(e){return this.delete(`/mcp-servers/${e}`)}async test(e){return this.get(`/mcp-servers/${e}/test`)}async getStats(){return this.get("/mcp-servers/stats")}}class de extends re{async list(e){return this.get("/common-configs",e)}async getById(e){return this.get(`/common-configs/${e}`)}async getByKey(e){return this.get(`/common-configs/key/${encodeURIComponent(e)}`)}async create(e){return this.post("/common-configs",e)}async update(e,t){return this.put(`/common-configs/${e}`,t)}async deleteById(e){return this.delete(`/common-configs/${e}`)}async batchUpdate(e){return this.post("/common-configs/batch",e)}async validate(e){return this.get(`/common-configs/${e}/validate`)}async getStats(){return this.get("/common-configs/stats")}}const ce=new ae,oe=new ne,xe=new le,me=new ie,he=new de,ue=new class extends re{async getHealth(){return this.get("/health")}async getInfo(){return this.get("/info")}};function ge({title:t,titleId:s,...r},a){return e.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":s},r),t?e.createElement("title",{id:s},t):null,e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 6h9.75M10.5 6a1.5 1.5 0 1 1-3 0m3 0a1.5 1.5 0 1 0-3 0M3.75 6H7.5m3 12h9.75m-9.75 0a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m-3.75 0H7.5m9-6h3.75m-3.75 0a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m-9.75 0h9.75"}))}const ye=e.forwardRef(ge);function pe({title:t,titleId:s,...r},a){return e.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":s},r),t?e.createElement("title",{id:s},t):null,e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 6 9 12.75l4.286-4.286a11.948 11.948 0 0 1 4.306 6.43l.776 2.898m0 0 3.182-5.511m-3.182 5.51-5.511-3.181"}))}const je=e.forwardRef(pe);function fe({title:t,titleId:s,...r},a){return e.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":s},r),t?e.createElement("title",{id:s},t):null,e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 18 9 11.25l4.306 4.306a11.95 11.95 0 0 1 5.814-5.518l2.74-1.22m0 0-5.94-2.281m5.94 2.28-2.28 5.941"}))}const be=e.forwardRef(fe);function ve({title:t,titleId:s,...r},a){return e.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":s},r),t?e.createElement("title",{id:s},t):null,e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"}))}const Ne=e.forwardRef(ve);function we({title:t,titleId:s,...r},a){return e.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":s},r),t?e.createElement("title",{id:s},t):null,e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.857 17.082a23.848 23.848 0 0 0 5.454-1.31A8.967 8.967 0 0 1 18 9.75V9A6 6 0 0 0 6 9v.75a8.967 8.967 0 0 1-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 0 1-5.714 0m5.714 0a3 3 0 1 1-5.714 0"}))}const ke=e.forwardRef(we);function Ce({title:t,titleId:s,...r},a){return e.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":s},r),t?e.createElement("title",{id:s},t):null,e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5 8.25 12l7.5-7.5"}))}const Ee=e.forwardRef(Ce);function _e({title:t,titleId:s,...r},a){return e.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":s},r),t?e.createElement("title",{id:s},t):null,e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"}))}const Se=e.forwardRef(_e);function Ie({title:t,titleId:s,...r},a){return e.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":s},r),t?e.createElement("title",{id:s},t):null,e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 15 12 18.75 15.75 15m-7.5-6L12 5.25 15.75 9"}))}const Me=e.forwardRef(Ie);function Te({title:t,titleId:s,...r},a){return e.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":s},r),t?e.createElement("title",{id:s},t):null,e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z"}),e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const Ae=e.forwardRef(Te);function Oe({title:t,titleId:s,...r},a){return e.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":s},r),t?e.createElement("title",{id:s},t):null,e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 12a7.5 7.5 0 0 0 15 0m-15 0a7.5 7.5 0 1 1 15 0m-15 0H3m16.5 0H21m-1.5 0H12m-8.457 3.077 1.41-.513m14.095-5.13 1.41-.513M5.106 17.785l1.15-.964m11.49-9.642 1.149-.964M7.501 19.795l.75-1.3m7.5-12.99.75-1.3m-6.063 16.658.26-1.477m2.605-14.772.26-1.477m0 17.726-.26-1.477M10.698 4.614l-.26-1.477M16.5 19.794l-.75-1.299M7.5 4.205 12 12m6.894 5.785-1.149-.964M6.256 7.178l-1.15-.964m15.352 8.864-1.41-.513M4.954 9.435l-1.41-.514M12.002 12l-3.75 6.495"}))}const Le=e.forwardRef(Oe);function ze({title:t,titleId:s,...r},a){return e.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":s},r),t?e.createElement("title",{id:s},t):null,e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 17.25v1.007a3 3 0 0 1-.879 2.122L7.5 21h9l-.621-.621A3 3 0 0 1 15 18.257V17.25m6-12V15a2.25 2.25 0 0 1-2.25 2.25H5.25A2.25 2.25 0 0 1 3 15V5.25m18 0A2.25 2.25 0 0 0 18.75 3H5.25A2.25 2.25 0 0 0 3 5.25m18 0V12a2.25 2.25 0 0 1-2.25 2.25H5.25A2.25 2.25 0 0 1 3 12V5.25"}))}const Pe=e.forwardRef(ze);function Re({title:t,titleId:s,...r},a){return e.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":s},r),t?e.createElement("title",{id:s},t):null,e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const He=e.forwardRef(Re);function $e({title:t,titleId:s,...r},a){return e.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":s},r),t?e.createElement("title",{id:s},t):null,e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z"}))}const Be=e.forwardRef($e);function De({title:t,titleId:s,...r},a){return e.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":s},r),t?e.createElement("title",{id:s},t):null,e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"}))}const qe=e.forwardRef(De);function We({title:t,titleId:s,...r},a){return e.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":s},r),t?e.createElement("title",{id:s},t):null,e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"}))}const Fe=e.forwardRef(We);function Ue({title:t,titleId:s,...r},a){return e.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":s},r),t?e.createElement("title",{id:s},t):null,e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.752 15.002A9.72 9.72 0 0 1 18 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 0 0 3 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 0 0 9.002-5.998Z"}))}const Ve=e.forwardRef(Ue);function Ze({title:t,titleId:s,...r},a){return e.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":s},r),t?e.createElement("title",{id:s},t):null,e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.75 17.25v-.228a4.5 4.5 0 0 0-.12-1.03l-2.268-9.64a3.375 3.375 0 0 0-3.285-2.602H7.923a3.375 3.375 0 0 0-3.285 2.602l-2.268 9.64a4.5 4.5 0 0 0-.12 1.03v.228m19.5 0a3 3 0 0 1-3 3H5.25a3 3 0 0 1-3-3m19.5 0a3 3 0 0 0-3-3H5.25a3 3 0 0 0-3 3m16.5 0h.008v.008h-.008v-.008Zm-3 0h.008v.008h-.008v-.008Z"}))}const Je=e.forwardRef(Ze);function Ke({title:t,titleId:s,...r},a){return e.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":s},r),t?e.createElement("title",{id:s},t):null,e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3v2.25m6.364.386-1.591 1.591M21 12h-2.25m-.386 6.364-1.591-1.591M12 18.75V21m-4.773-4.227-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0Z"}))}const Ye=e.forwardRef(Ke);function Ge({title:t,titleId:s,...r},a){return e.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":s},r),t?e.createElement("title",{id:s},t):null,e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 18.72a9.094 9.094 0 0 0 3.741-.479 3 3 0 0 0-4.682-2.72m.94 3.198.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0 1 12 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 0 1 6 18.719m12 0a5.971 5.971 0 0 0-.941-3.197m0 0A5.995 5.995 0 0 0 12 12.75a5.995 5.995 0 0 0-5.058 2.772m0 0a3 3 0 0 0-4.681 2.72 8.986 8.986 0 0 0 3.74.477m.94-3.197a5.971 5.971 0 0 0-.94 3.197M15 6.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm6 3a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Zm-13.5 0a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Z"}))}const Xe=e.forwardRef(Ge);function Qe({title:t,titleId:s,...r},a){return e.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":s},r),t?e.createElement("title",{id:s},t):null,e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19.128a9.38 9.38 0 0 0 2.625.372 9.337 9.337 0 0 0 4.121-.952 4.125 4.125 0 0 0-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 0 1 8.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0 1 11.964-3.07M12 6.375a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0Zm8.25 2.25a2.625 2.625 0 1 1-5.25 0 2.625 2.625 0 0 1 5.25 0Z"}))}const et=e.forwardRef(Qe);function tt({title:t,titleId:s,...r},a){return e.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":s},r),t?e.createElement("title",{id:s},t):null,e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))}const st=e.forwardRef(tt),rt=t=>{const s=r(),a=[...[{key:"Ctrl+S",action:()=>{},description:"保存",priority:1},{key:"Ctrl+Z",action:()=>{window.history.back()},description:"撤销/返回",priority:1},{key:"Ctrl+Y",action:()=>{window.history.forward()},description:"重做/前进",priority:1},{key:"Ctrl+R",action:()=>{window.location.reload()},description:"刷新页面",priority:1},{key:"Ctrl+F",action:()=>{const e=document.querySelector('input[type="search"]');e&&e.focus()},description:"搜索",priority:1},{key:"Escape",action:()=>{const e=document.querySelector('[role="dialog"]');e?.open?e.close():window.history.back()},description:"关闭/返回",priority:2},{key:"F1",action:()=>{},description:"帮助",priority:3},{key:"F11",action:()=>{document.fullscreenElement?document.exitFullscreen():document.documentElement.requestFullscreen()},description:"全屏切换",priority:2},{key:"Alt+H",action:()=>s("/dashboard"),description:"返回首页",priority:1},{key:"Alt+1",action:()=>s("/dashboard"),description:"仪表盘",priority:1},{key:"Alt+2",action:()=>s("/claude-providers"),description:"Claude供应商",priority:1},{key:"Alt+3",action:()=>s("/codex-providers"),description:"Codex供应商",priority:1},{key:"Alt+4",action:()=>s("/agent-guides"),description:"Agent指导",priority:1},{key:"Alt+5",action:()=>s("/mcp-servers"),description:"MCP服务器",priority:1},{key:"Alt+6",action:()=>s("/common-configs"),description:"通用配置",priority:1},{key:"Alt+7",action:()=>s("/settings"),description:"设置",priority:1},{key:"Ctrl+N",action:()=>{},description:"新建",priority:1},{key:"Ctrl+E",action:()=>{},description:"编辑",priority:1},{key:"Ctrl+D",action:()=>{},description:"删除",priority:1},{key:"Ctrl+A",action:()=>{const e=document.activeElement;e&&e.select&&e.select()},description:"全选",priority:1},{key:"Ctrl+C",action:()=>{document.execCommand("copy")},description:"复制",priority:1},{key:"Ctrl+V",action:()=>{document.execCommand("paste")},description:"粘贴",priority:1},{key:"Ctrl+X",action:()=>{document.execCommand("cut")},description:"剪切",priority:1}],...t.shortcuts],n=(e,t)=>{const s=(e=>{const t=e.toLowerCase().split("+");return{ctrl:t.includes("ctrl")||t.includes("control"),alt:t.includes("alt"),shift:t.includes("shift"),key:t.find(e=>!["ctrl","alt","shift","control"].includes(e))||""}})(t.key);return e.ctrlKey===s.ctrl&&e.altKey===s.alt&&e.shiftKey===s.shift&&e.key.toLowerCase()===s.key.toLowerCase()},l=e.useCallback(e=>{if(!t.enabled||!1===t.global&&e.target instanceof HTMLInputElement)return;if(e.target instanceof HTMLInputElement||e.target instanceof HTMLTextAreaElement||e.target instanceof HTMLSelectElement){if(!a.some(t=>!t.disabled&&(e.ctrlKey||e.altKey||"Escape"===t.key||t.key.startsWith("F"))))return}const s=[...a].sort((e,t)=>(t.priority||0)-(e.priority||0));for(const a of s)if(!a.disabled&&n(e,a)){e.preventDefault(),e.stopPropagation();try{a.action(),t.onShortcutTriggered&&t.onShortcutTriggered(a,e)}catch(r){}break}},[a,t.enabled,t.global,t.onShortcutTriggered]);e.useEffect(()=>(document.addEventListener("keydown",l),()=>{document.removeEventListener("keydown",l)}),[l]);const i=e.useCallback(()=>a.filter(e=>!e.disabled),[a]),d=e.useCallback(()=>i().map(e=>({key:e.key,description:e.description})),[i]);return{shortcuts:i(),shortcutHelp:d(),addShortcut:e=>{t.shortcuts.push(e)},removeShortcut:e=>{const s=t.shortcuts.findIndex(t=>t.key===e);s>-1&&t.shortcuts.splice(s,1)},toggleShortcut:(e,s)=>{const r=t.shortcuts.find(t=>t.key===e);r&&(r.disabled=void 0!==s?s:!r.disabled)}}},at=[{id:"dashboard",label:"仪表板",icon:qe,path:"/dashboard"},{id:"claude-providers",label:"Claude 供应商",icon:Xe,path:"/claude-providers"},{id:"codex-providers",label:"Codex 供应商",icon:Je,path:"/codex-providers"},{id:"agent-guides",label:"Agent 指导文件",icon:He,path:"/agent-guides"},{id:"mcp-servers",label:"MCP 服务器",icon:Pe,path:"/mcp-servers"},{id:"common-configs",label:"通用配置",icon:ye,path:"/common-configs"}],nt=()=>{const[t,s]=m(O),r=a(),[l,i]=e.useState(!1),d=()=>{s(!t)},c=()=>{i(!l)};return rt({shortcuts:[{key:"Ctrl+B",action:d,description:"切换侧边栏",priority:2},{key:"Ctrl+M",action:c,description:"切换移动端菜单",priority:2}],enabled:!0,global:!0}),C.jsxs(C.Fragment,{children:[l&&C.jsx("div",{className:"fixed inset-0 z-40 bg-gray-600 bg-opacity-50 backdrop-blur-sm lg:hidden animate-fade-in",onClick:c}),C.jsxs("div",{className:`\n          fixed inset-y-0 left-0 z-50 bg-gray-800 text-white transition-all duration-300 ease-in-out\n          transform lg:transform-none\n          ${t?"w-16 -translate-x-full lg:translate-x-0":"w-64"}\n          ${l?"translate-x-0":"-translate-x-full"}\n        `,children:[C.jsxs("div",{className:"flex items-center justify-between h-16 px-4 border-b border-gray-700",children:[C.jsx("h1",{className:`\n              text-xl font-bold transition-all duration-300\n              ${t?"opacity-0 w-0 overflow-hidden":"opacity-100"}\n            `,children:"AI Manager"}),C.jsx("button",{onClick:d,className:"hidden lg:block p-1 rounded-md hover:bg-gray-700 transition-colors focus:outline-none focus:ring-2 focus:ring-inset focus:ring-primary-500","aria-label":"切换侧边栏",children:t?C.jsx(Se,{className:"h-5 w-5"}):C.jsx(Ee,{className:"h-5 w-5"})}),C.jsx("button",{onClick:c,className:"lg:hidden p-1 rounded-md hover:bg-gray-700 transition-colors focus:outline-none focus:ring-2 focus:ring-inset focus:ring-primary-500","aria-label":"关闭菜单",children:C.jsx(st,{className:"h-5 w-5"})})]}),C.jsx("nav",{className:"flex-1 px-2 py-4 space-y-1 overflow-y-auto",children:at.map(e=>{const s=r.pathname===e.path;return C.jsxs(n,{to:e.path,onClick:()=>i(!1),className:`\n                  group flex items-center px-3 py-2 text-sm font-medium rounded-md transition-all duration-200\n                  hover:scale-105 active:scale-105\n                  ${s?"bg-primary-600 text-white shadow-lg":"text-gray-300 hover:bg-gray-700 hover:text-white"}\n                  ${t?"justify-center":"justify-start"}\n                `,"aria-label":e.label,title:t?e.label:void 0,children:[C.jsx(e.icon,{className:"h-6 w-6 flex-shrink-0 "+(t?"":"mr-3")}),C.jsx("span",{className:(t?"hidden":"block")+" transition-all duration-200",children:e.label}),s&&C.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-1 bg-white rounded-r-full animate-pulse"})]},e.id)})}),C.jsxs("div",{className:"px-2 py-4 border-t border-gray-700 space-y-2",children:[C.jsxs(n,{to:"/settings",onClick:()=>i(!1),className:`\n              group flex items-center px-3 py-2 text-sm font-medium rounded-md transition-all duration-200\n              hover:scale-105 active:scale-105\n              ${"/settings"===r.pathname?"bg-primary-600 text-white shadow-lg":"text-gray-300 hover:bg-gray-700 hover:text-white"}\n              ${t?"justify-center":"justify-start"}\n            `,"aria-label":"设置",title:t?"设置":void 0,children:[C.jsx(Ae,{className:"h-6 w-6 flex-shrink-0 "+(t?"":"mr-3")}),C.jsx("span",{className:(t?"hidden":"block")+" transition-all duration-200",children:"设置"}),"/settings"===r.pathname&&C.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-1 bg-white rounded-r-full animate-pulse"})]}),t&&C.jsxs("div",{className:"text-center text-xs text-gray-400 px-2",children:["按 ",C.jsx("kbd",{className:"px-1 py-0.5 text-xs bg-gray-700 rounded",children:"B"})," 展开"]})]})]})]})},lt=()=>{const[t,s]=m(A);m(O);const[r]=m(L),[a,n]=e.useState(!1),[l,i]=e.useState(""),d=useRef(null),c=()=>{s("light"===t?"dark":"light")};rt({shortcuts:[{key:"Ctrl+K",action:()=>{n(!a),a||setTimeout(()=>d.current?.focus(),100)},description:"搜索",priority:1},{key:"Ctrl+T",action:c,description:"切换主题",priority:2}],enabled:!0,global:!0});const o=r.length>0;return C.jsx("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-4 py-3 sm:px-6 lg:px-8 transition-all duration-200",children:C.jsxs("div",{className:"flex items-center justify-between",children:[C.jsxs("div",{className:"flex items-center min-w-0 flex-1",children:[C.jsx("button",{onClick:()=>window.dispatchEvent(new CustomEvent("toggleMobileMenu")),className:"lg:hidden p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors mr-3","aria-label":"打开侧边栏",children:C.jsx(Ne,{className:"h-6 w-6"})}),C.jsxs("div",{className:"flex items-center",children:[C.jsx("div",{className:"h-8 w-8 bg-gradient-to-br from-primary-500 to-primary-600 rounded-lg flex items-center justify-center text-white font-bold shadow-sm",children:"A"}),C.jsxs("div",{className:"ml-3",children:[C.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white truncate",children:"AI Manager"}),C.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 hidden sm:block",children:"迁移版本 • 高性能桌面应用"})]})]})]}),C.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-4",children:[C.jsxs("div",{className:"relative",children:[a&&C.jsx("div",{className:"absolute right-0 top-0 z-50 animate-fade-in",children:C.jsxs("div",{className:"flex items-center bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg shadow-lg",children:[C.jsx("input",{ref:d,type:"text",value:l,onChange:e=>i(e.target.value),placeholder:"搜索...",className:"w-48 sm:w-64 px-3 py-2 text-sm border-0 focus:ring-0 bg-transparent",onBlur:()=>setTimeout(()=>n(!1),200)}),C.jsx("button",{onClick:()=>n(!1),className:"p-1 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 mr-1",children:C.jsx(st,{className:"h-4 w-4"})})]})}),C.jsx("button",{onClick:()=>n(!a),className:"p-2 rounded-lg text-gray-400 hover:text-gray-500 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",title:"搜索 (Ctrl+K)",children:C.jsx(Fe,{className:"h-5 w-5"})})]}),C.jsx("div",{className:"relative",children:C.jsxs("button",{className:"p-2 rounded-lg text-gray-400 hover:text-gray-500 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors relative",title:"通知",children:[C.jsx(ke,{className:"h-5 w-5"}),o&&C.jsx("span",{className:"absolute top-1 right-1 h-2 w-2 bg-error-500 rounded-full animate-pulse"})]})}),C.jsx("button",{onClick:c,className:"p-2 rounded-lg text-gray-400 hover:text-gray-500 hover:bg-gray-100 dark:hover:bg-gray-700 transition-all duration-200 group",title:"light"===t?"切换到深色模式 (Ctrl+T)":"切换到浅色模式 (Ctrl+T)",children:C.jsx("div",{className:"relative",children:"light"===t?C.jsx(Ve,{className:"h-5 w-5 group-hover:rotate-12 transition-transform"}):C.jsx(Ye,{className:"h-5 w-5 group-hover:rotate-12 transition-transform"})})}),C.jsx("div",{className:"h-8 w-8 bg-gradient-to-br from-secondary-400 to-secondary-500 rounded-full flex items-center justify-center text-white text-sm font-medium shadow-sm cursor-pointer hover:shadow-md transition-shadow",children:C.jsx("span",{children:"U"})})]})]})})},it=({children:t})=>{const[s]=m(O);m(A);const[r,a]=e.useState(0),[n,l]=e.useState(!1);e.useEffect(()=>{const e=()=>{a(window.scrollY),l(window.scrollY>200)};return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)},[]);const i=()=>{window.scrollTo({top:0,behavior:"smooth"})};return rt({shortcuts:[{key:"Home",action:i,description:"滚动到顶部",priority:3},{key:"End",action:()=>window.scrollTo({top:document.body.scrollHeight,behavior:"smooth"}),description:"滚动到底部",priority:3}],enabled:!0,global:!0}),C.jsx("main",{className:"flex-1 overflow-y-auto bg-gray-50 dark:bg-gray-900 transition-all duration-300 ease-in-out relative "+(s?"lg:ml-16":"lg:ml-64"),children:C.jsxs("div",{className:"min-h-screen",children:[r>100&&C.jsx("div",{className:"fixed top-0 left-0 right-0 z-50 lg:left-16 lg:left-64 transition-all duration-300",children:C.jsx("div",{className:"h-1 bg-primary-500 dark:bg-primary-400 transition-all duration-150",style:{width:`${Math.min(r/(document.body.scrollHeight-window.innerHeight)*100,100)}%`}})}),n&&C.jsx("button",{onClick:i,className:"fixed bottom-6 right-6 z-40 p-3 bg-primary-500 hover:bg-primary-600 text-white rounded-full shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-110 animate-bounce-in",title:"返回顶部 (Home)",children:C.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 20 20",children:C.jsx("path",{fillRule:"evenodd",d:"M14.707 12.707a1 1 0 01-1.414 0L10 9.414l-3.293 3.293a1 1 0 01-1.414-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 010 1.414z",clipRule:"evenodd"})})}),C.jsx("div",{className:"lg:hidden sticky top-0 z-30",children:C.jsx(lt,{})}),C.jsx("div",{className:"hidden lg:block sticky top-0 z-30",children:C.jsx(lt,{})}),C.jsx("div",{className:"p-4 sm:p-6 lg:p-8 xl:p-10 transition-all duration-200",children:C.jsx("div",{className:"max-w-7xl mx-auto",children:t})}),C.jsx("footer",{className:"mt-16 border-t border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 transition-colors",children:C.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:C.jsxs("div",{className:"text-center",children:[C.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"AI Manager 迁移版本 • 高性能 Rust/Tauri 桌面应用"}),C.jsxs("div",{className:"mt-2 flex items-center justify-center space-x-4 text-xs text-gray-400 dark:text-gray-500",children:[C.jsx("span",{children:"版本 0.1.0"}),C.jsx("span",{children:"•"}),C.jsxs("span",{children:["构建时间 ",(new Date).toLocaleDateString("zh-CN")]}),C.jsx("span",{children:"•"}),C.jsx("span",{children:"响应时间 < 500ms"})]})]})})})]})})},dt=({children:t})=>{const[s]=m(O),[r]=m(A);return e.useEffect(()=>{const e=()=>{window.innerWidth<1024&&!s&&window.dispatchEvent(new CustomEvent("autoCollapseSidebar"))};return window.addEventListener("resize",e),e(),()=>window.removeEventListener("resize",e)},[s]),C.jsxs("div",{className:"flex h-screen "+("dark"===r?"dark":""),children:[C.jsxs("div",{className:"flex-1 flex bg-gray-100 dark:bg-gray-950 transition-colors duration-200",children:[C.jsx(nt,{}),C.jsx(it,{children:t})]}),C.jsx(ct,{})]})},ct=()=>{const[t,s]=e.useState(!1);rt({shortcuts:[{key:"?",action:()=>s(!t),description:"显示快捷键帮助",priority:4}],enabled:!0,global:!0});return t?C.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 backdrop-blur-sm animate-fade-in",children:C.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl max-w-md w-full mx-4 animate-bounce-in",children:[C.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[C.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"键盘快捷键"}),C.jsx("button",{onClick:()=>s(!1),className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",children:C.jsx(st,{className:"h-5 w-5"})})]}),C.jsx("div",{className:"p-6 max-h-96 overflow-y-auto",children:C.jsx("div",{className:"space-y-3",children:[{key:"Ctrl+B",description:"切换侧边栏"},{key:"Ctrl+M",description:"切换移动端菜单"},{key:"Ctrl+K",description:"搜索"},{key:"Ctrl+T",description:"切换主题"},{key:"Ctrl+/",description:"显示快捷键帮助"},{key:"Alt+1-7",description:"快速导航到不同页面"},{key:"Home",description:"滚动到顶部"},{key:"End",description:"滚动到底部"},{key:"Esc",description:"关闭弹窗/取消操作"}].map((e,t)=>C.jsxs("div",{className:"flex items-center justify-between",children:[C.jsx("kbd",{className:"px-2 py-1 text-xs font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded",children:e.key}),C.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:e.description})]},t))})}),C.jsx("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700",children:C.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 text-center",children:["提示：按 ",C.jsx("kbd",{className:"px-1 py-0.5 text-xs bg-gray-100 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded",children:"ESC"})," 关闭此窗口"]})})]})}):null},ot=({children:e})=>C.jsx(dt,{children:e});function xt(e){var t,s,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(s=xt(e[t]))&&(r&&(r+=" "),r+=s)}else for(s in e)e[s]&&(r&&(r+=" "),r+=s);return r}const mt=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,ht=function(){for(var e,t,s=0,r="",a=arguments.length;s<a;s++)(e=arguments[s])&&(t=xt(e))&&(r&&(r+=" "),r+=t);return r},ut=(e,t)=>s=>{var r;if(null==(null==t?void 0:t.variants))return ht(e,null==s?void 0:s.class,null==s?void 0:s.className);const{variants:a,defaultVariants:n}=t,l=Object.keys(a).map(e=>{const t=null==s?void 0:s[e],r=null==n?void 0:n[e];if(null===t)return null;const l=mt(t)||mt(r);return a[e][l]}),i=s&&Object.entries(s).reduce((e,t)=>{let[s,r]=t;return void 0===r||(e[s]=r),e},{}),d=null==t||null===(r=t.compoundVariants)||void 0===r?void 0:r.reduce((e,t)=>{let{class:s,className:r,...a}=t;return Object.entries(a).every(e=>{let[t,s]=e;return Array.isArray(s)?s.includes({...n,...i}[t]):{...n,...i}[t]===s})?[...e,s,r]:e},[]);return ht(e,l,d,null==s?void 0:s.class,null==s?void 0:s.className)},gt=ut("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{primary:"bg-blue-600 text-white hover:bg-blue-700 focus-visible:ring-blue-500",secondary:"bg-gray-100 text-gray-900 hover:bg-gray-200 focus-visible:ring-gray-500",success:"bg-green-600 text-white hover:bg-green-700 focus-visible:ring-green-500",warning:"bg-yellow-600 text-white hover:bg-yellow-700 focus-visible:ring-yellow-500",danger:"bg-red-600 text-white hover:bg-red-700 focus-visible:ring-red-500",ghost:"hover:bg-gray-100 hover:text-gray-900 focus-visible:ring-gray-500",link:"text-blue-600 underline-offset-4 hover:underline focus-visible:ring-blue-500"},size:{xs:"h-7 px-2 text-xs",sm:"h-8 px-3 text-xs",md:"h-9 px-4 py-2 text-sm",lg:"h-10 px-6 py-2 text-sm",xl:"h-12 px-8 py-3 text-base"}},defaultVariants:{variant:"primary",size:"md"}}),yt=e.forwardRef(({className:e,variant:t,size:s,asChild:r=!1,loading:a=!1,icon:n,iconPosition:l="left",children:i,disabled:d,...c},o)=>{const x=r?"span":"button";return C.jsxs(x,{className:gt({variant:t,size:s,className:e}),ref:o,disabled:d||a,...c,children:[a&&C.jsxs("svg",{className:"mr-2 h-4 w-4 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[C.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),C.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),n&&"left"===l&&!a&&C.jsx("span",{className:"mr-2",children:n}),i,n&&"right"===l&&!a&&C.jsx("span",{className:"ml-2",children:n})]})});yt.displayName="Button";e.forwardRef(({className:e,variant:t="ghost",size:s="sm",...r},a)=>C.jsx(yt,{className:gt({variant:t,size:s,className:e||""}),ref:a,...r})).displayName="IconButton";e.forwardRef(({loading:e=!0,...t},s)=>C.jsx(yt,{ref:s,loading:e,...t})).displayName="LoadingButton";const pt=ut("rounded-lg border",{variants:{variant:{default:"border-gray-200 bg-white",outlined:"border-gray-300 bg-white",elevated:"border-gray-200 bg-white shadow-md"},padding:{none:"",sm:"p-4",md:"p-6",lg:"p-8"}},defaultVariants:{variant:"default",padding:"md"}}),jt=e.forwardRef(({className:e,variant:t,padding:s,...r},a)=>C.jsx("div",{ref:a,className:pt({variant:t,padding:s,className:e}),...r}));jt.displayName="Card";const ft=e.forwardRef(({className:e,...t},s)=>C.jsx("div",{ref:s,className:"flex flex-col space-y-1.5 p-6",...t}));ft.displayName="CardHeader";const bt=e.forwardRef(({className:e,...t},s)=>C.jsx("h3",{ref:s,className:"text-2xl font-semibold leading-none tracking-tight",...t}));bt.displayName="CardTitle";e.forwardRef(({className:e,...t},s)=>C.jsx("p",{ref:s,className:"text-sm text-gray-600",...t})).displayName="CardDescription";const vt=e.forwardRef(({className:e,...t},s)=>C.jsx("div",{ref:s,className:"p-6 pt-0",...t}));vt.displayName="CardContent";e.forwardRef(({className:e,...t},s)=>C.jsx("div",{ref:s,className:"flex items-center p-6 pt-0",...t})).displayName="CardFooter";const Nt={sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl",full:"max-w-full mx-4"},wt=({isOpen:t,onClose:s,title:r,description:a,size:n="md",showCloseButton:l=!0,preventClose:i=!1,children:d,footer:c})=>{const o=e.useRef(null);return e.useEffect(()=>{const e=e=>{"Escape"===e.key&&t&&!i&&s()};return t&&(document.addEventListener("keydown",e),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",e),document.body.style.overflow=""}},[t,s,i]),C.jsx(u,{show:t,as:!0,Fragment:!0,children:C.jsxs(g,{as:"div",className:"relative z-50",onClose:i?()=>{}:s,initialFocus:o,children:[C.jsx(u.Child,{as:e.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:C.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"})}),C.jsx("div",{className:"fixed inset-0 z-10 overflow-y-auto",children:C.jsx("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:C.jsx(u.Child,{as:e.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",enterTo:"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0 sm:scale-100",leaveTo:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",children:C.jsxs(g.Panel,{className:`relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full ${Nt[n]}`,onClick:e=>{e.target!==e.currentTarget||i||s()},children:[(r||l)&&C.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200",children:[C.jsxs("div",{className:"flex-1",children:[r&&C.jsx(g.Title,{as:"h3",className:"text-lg font-medium leading-6 text-gray-900",children:r}),a&&C.jsx(g.Description,{className:"mt-1 text-sm text-gray-500",children:a})]}),l&&C.jsxs("button",{type:"button",className:"rounded-md bg-white text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",onClick:s,disabled:i,children:[C.jsx("span",{className:"sr-only",children:"关闭"}),C.jsx(st,{className:"h-6 w-6","aria-hidden":"true"})]})]}),C.jsx("div",{className:"px-6 py-4",children:d}),c&&C.jsx("div",{className:"px-6 py-4 border-t border-gray-200 bg-gray-50",children:c})]})})})})]})})},kt=ut("flex w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm placeholder:text-gray-500 shadow-sm transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:cursor-not-allowed disabled:opacity-50",{variants:{variant:{default:"border-gray-300 bg-white",filled:"border-gray-300 bg-gray-50",flushed:"border-0 border-b-2 border-gray-300 rounded-none px-0 bg-transparent shadow-none focus:ring-0 focus:border-blue-500",unstyled:"border-0 bg-transparent px-0 shadow-none focus:ring-0 focus:ring-transparent"},size:{sm:"h-8 text-xs",md:"h-9 text-sm",lg:"h-10 text-base"}},defaultVariants:{variant:"default",size:"md"}}),Ct=e.forwardRef(({className:e,variant:t,size:s,type:r,label:a,error:n,helperText:l,required:i,leftIcon:d,rightIcon:c,id:o,...x},m)=>{const h=o||`input-${Math.random().toString(36).substr(2,9)}`;return C.jsxs("div",{className:"w-full",children:[a&&C.jsxs("label",{htmlFor:h,className:"block text-sm font-medium text-gray-700 mb-1",children:[a,i&&C.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),C.jsxs("div",{className:"relative",children:[d&&C.jsx("div",{className:"absolute left-0 pl-3 flex items-center pointer-events-none",children:d}),C.jsx("input",{type:r,id:h,className:kt({variant:t,size:s,className:e}),ref:m,...d&&{className:`${kt({variant:t,size:s,className:e})} pl-10`},...c&&{className:`${kt({variant:t,size:s,className:e})} pr-10`},...n&&{className:`${kt({variant:t,size:s,className:e})} border-red-500 focus:ring-red-500 focus:border-red-500`},...x}),c&&C.jsx("div",{className:"absolute right-0 pr-3 flex items-center pointer-events-none",children:c}),n&&!c&&C.jsx("div",{className:"absolute right-0 pr-3 flex items-center pointer-events-none",children:C.jsx(Be,{className:"h-5 w-5 text-red-500"})})]}),(l||n)&&C.jsx("p",{className:"mt-1 text-xs "+(n?"text-red-500":"text-gray-500"),children:n||l})]})});Ct.displayName="Input";e.forwardRef(({className:e,variant:t,size:s,...r},a)=>C.jsxs("div",{className:"w-full",children:[r.label&&C.jsxs("label",{htmlFor:r.id,className:"block text-sm font-medium text-gray-700 mb-1",children:[r.label,r.required&&C.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),C.jsxs("div",{className:"relative",children:[C.jsx("textarea",{className:`flex min-h-[80px] w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm placeholder:text-gray-500 shadow-sm transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:cursor-not-allowed disabled:opacity-50 ${"filled"===t?"bg-gray-50":"bg-white"} ${"flushed"===t?"border-0 border-b-2 border-gray-300 rounded-none px-0 bg-transparent shadow-none focus:ring-0 focus:border-blue-500":""} ${"unstyled"===t?"border-0 bg-transparent px-0 shadow-none focus:ring-0":""} ${"sm"===s?"text-xs":"lg"===s?"text-base":"text-sm"} ${e} ${r.error?"border-red-500 focus:ring-red-500 focus:border-red-500":""}`,ref:a,...r}),r.error&&C.jsx("div",{className:"absolute right-0 top-2 pr-3 flex items-start pointer-events-none",children:C.jsx(Be,{className:"h-5 w-5 text-red-500"})})]}),(r.helperText||r.error)&&C.jsx("p",{className:"mt-1 text-xs "+(r.error?"text-red-500":"text-gray-500"),children:r.error||r.helperText})]})).displayName="Textarea";function Et({data:t,columns:s,loading:r=!1,pagination:a,search:n,actions:l,emptyMessage:i="暂无数据",className:d=""}){const[c,o]=e.useState(null),x=e.useMemo(()=>c?[...t].sort((e,t)=>{const s=e[c.key],r=t[c.key];if(null==s)return 1;if(null==r)return-1;let a=0;return a="string"==typeof s&&"string"==typeof r?s.localeCompare(r):s>r?1:s<r?-1:0,"desc"===c.direction?-a:a}):t,[t,c]);return C.jsxs("div",{className:`overflow-hidden shadow ring-1 ring-black ring-opacity-5 md:rounded-lg ${d}`,children:[n&&C.jsx("div",{className:"bg-white px-4 py-3 border-b border-gray-200 sm:px-6",children:C.jsx("div",{className:"flex items-center",children:C.jsxs("div",{className:"relative flex-1",children:[C.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-0 pl-3 flex items-center",children:C.jsx(Fe,{className:"h-5 w-5 text-gray-400"})}),C.jsx("input",{type:"text",className:"block w-full rounded-lg border-0 py-1.5 pl-10 text-gray-900 placeholder-gray-500 focus:ring-0 sm:text-sm sm:leading-6",placeholder:n.placeholder||"搜索...",value:n.value||"",onChange:e=>n.onChange(e.target.value)})]})})}),C.jsx("div",{className:"overflow-x-auto",children:C.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[C.jsx("thead",{className:"bg-gray-50",children:C.jsxs("tr",{children:[s.map(e=>C.jsx("th",{className:`px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider ${e.sortable?"cursor-pointer hover:bg-gray-100":""} ${e.width||""}`,onClick:()=>e.sortable&&(e=>{let t="asc";c?.key===e&&(t="asc"===c.direction?"desc":"asc"),o({key:e,direction:t})})(String(e.key)),children:C.jsxs("div",{className:"flex items-center space-x-1",children:[e.title,e.sortable&&C.jsx("span",{children:c?.key===String(e.key)?"asc"===c.direction?C.jsx(Me,{className:"h-4 w-4"}):C.jsx(Me,{className:"h-4 w-4 rotate-180"}):C.jsx(Me,{className:"h-4 w-4 opacity-30"})})]})},String(e.key))),l&&C.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"操作"})]})}),r?C.jsx("tbody",{children:C.jsx("tr",{children:C.jsxs("td",{colSpan:s.length+(l?1:0),className:"px-6 py-12 text-center",children:[C.jsx("div",{className:"flex justify-center",children:C.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}),C.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"加载中..."})]})})}):0===x.length?C.jsx("tbody",{children:C.jsx("tr",{children:C.jsx("td",{colSpan:s.length+(l?1:0),className:"px-6 py-12 text-center",children:C.jsx("p",{className:"text-gray-500",children:i})})})}):C.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:x.map((e,t)=>C.jsxs("tr",{className:"hover:bg-gray-50",children:[s.map(t=>C.jsx("td",{className:`px-6 py-4 whitespace-nowrap text-sm text-gray-900 ${t.width||""}`,children:t.render?t.render(e[t.key],e):String(e[t.key]||"")},String(t.key))),l&&C.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:C.jsx("div",{className:"flex justify-end space-x-2",children:l(e).map((e,t)=>C.jsxs("button",{onClick:e.onClick,className:"text-blue-600 hover:text-blue-900 "+("danger"===e.variant?"text-red-600 hover:text-red-900":"secondary"===e.variant?"text-gray-600 hover:text-gray-900":"text-blue-600 hover:text-blue-900"),children:[e.icon&&C.jsx("span",{className:"mr-1",children:e.icon}),e.label]},t))})})]},t))})]})}),(()=>{if(!a)return null;const{current:e,pageSize:t,total:s}=a,r=Math.ceil(s/t),n=(e-1)*t+1,l=Math.min(e*t,s);return C.jsxs("div",{className:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6",children:[C.jsxs("div",{className:"flex flex-1 justify-between sm:hidden",children:[C.jsx("button",{onClick:()=>a.onChange(Math.max(1,e-1),t),disabled:1===e,className:"relative inline-flex items-center rounded-md bg-white px-2 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50",children:"上一页"}),C.jsx("button",{onClick:()=>a.onChange(Math.min(r,e+1),t),disabled:e===r,className:"relative ml-3 inline-flex items-center rounded-md bg-white px-2 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50",children:"下一页"})]}),C.jsxs("div",{className:"hidden sm:flex sm:flex-1 sm:items-center sm:justify-between",children:[C.jsx("div",{children:C.jsxs("p",{className:"text-sm text-gray-700",children:["显示第 ",C.jsx("span",{className:"font-medium",children:n})," 到"," ",C.jsx("span",{className:"font-medium",children:l})," 项，共"," ",C.jsx("span",{className:"font-medium",children:s})," 项"]})}),C.jsx("div",{children:C.jsxs("nav",{className:"isolate inline-flex -space-x-px rounded-md shadow-sm","aria-label":"Pagination",children:[C.jsxs("button",{onClick:()=>a.onChange(Math.max(1,e-1),t),disabled:1===e,className:"relative inline-flex items-center rounded-l-md px-2 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 focus:z-20 focus:outline-offset-0 disabled:opacity-50",children:[C.jsx("span",{className:"sr-only",children:"上一页"}),C.jsx(Ee,{className:"h-5 w-5","aria-hidden":"true"})]}),Array.from({length:Math.min(5,r)},(s,n)=>{let l;return l=r<=5||e<=3?n+1:e>=r-2?r-4+n:e-2+n,C.jsx("button",{onClick:()=>a.onChange(l,t),className:`relative inline-flex items-center px-4 py-2 text-sm font-medium ${e===l?"z-10 bg-blue-50 text-blue-600 focus:outline-offset-0":"text-gray-700 hover:bg-gray-50 focus:z-20 focus:outline-offset-0"} ${0===n?"rounded-l-md":""} ${4===n?"rounded-r-md":""}`,children:l},l)}),C.jsxs("button",{onClick:()=>a.onChange(Math.min(r,e+1),t),disabled:e===r,className:"relative inline-flex items-center rounded-r-md px-2 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 focus:z-20 focus:outline-offset-0 disabled:opacity-50",children:[C.jsx("span",{className:"sr-only",children:"下一页"}),C.jsx(Se,{className:"h-5 w-5","aria-hidden":"true"})]})]})})]})]})})()]})}e.forwardRef(({className:e,variant:t,size:s,label:r,error:a,helperText:n,required:l,options:i,placeholder:d,id:c,...o},x)=>{const m=c||`select-${Math.random().toString(36).substr(2,9)}`;return C.jsxs("div",{className:"w-full",children:[r&&C.jsxs("label",{htmlFor:m,className:"block text-sm font-medium text-gray-700 mb-1",children:[r,l&&C.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),C.jsxs("select",{id:m,className:kt({variant:t,size:s,className:e}),ref:x,...a&&{className:`${kt({variant:t,size:s,className:e})} border-red-500 focus:ring-red-500 focus:border-red-500`},...o,children:[d&&C.jsx("option",{value:"",disabled:!0,children:d}),i.map(e=>C.jsx("option",{value:e.value,children:e.label},e.value))]}),(n||a)&&C.jsx("p",{className:"mt-1 text-xs "+(a?"text-red-500":"text-gray-500"),children:a||n})]})}).displayName="Select";const _t=({title:e,value:t,subtitle:s,trend:r,icon:a,color:n,loading:l=!1})=>{const i={blue:"bg-blue-50 text-blue-600",green:"bg-green-50 text-green-600",yellow:"bg-yellow-50 text-yellow-600",red:"bg-red-50 text-red-600",purple:"bg-purple-50 text-purple-600"};return C.jsx(jt,{className:`${i[n]} hover:shadow-md transition-shadow`,children:C.jsx(vt,{className:"p-6",children:C.jsxs("div",{className:"flex items-center",children:[C.jsx("div",{className:`flex-shrink-0 ${i[n]}`,children:a}),C.jsx("div",{className:"ml-5 w-0 flex-1",children:C.jsxs("dl",{children:[C.jsx("dt",{className:"text-sm font-medium truncate",children:e}),C.jsx("dd",{className:"text-2xl font-bold",children:l?"...":t}),s&&C.jsx("dd",{className:"text-sm text-gray-500",children:s}),r&&C.jsx("dd",{className:"flex items-center text-sm",children:C.jsxs("span",{className:"flex items-center "+(r.isPositive?"text-green-600":"text-red-600"),children:[r.isPositive?C.jsx(be,{className:"h-4 w-4 mr-1"}):C.jsx(je,{className:"h-4 w-4 mr-1"}),r.value,"%"]})})]})})]})})})},St=()=>{const[t]=m(B),[s]=m(W),[r]=m(V),[a]=m(K),[n]=m(X),[l,i]=e.useState(!1);return e.useEffect(()=>{(async()=>{i(!0);try{const[e,t,s,r,a]=await Promise.all([ce.getStats(),oe.getStats(),xe.getStats(),me.getStats(),he.getStats()])}catch(e){}finally{i(!1)}})()},[]),C.jsxs("div",{className:"space-y-6",children:[C.jsxs("div",{children:[C.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"仪表板"}),C.jsx("p",{className:"text-gray-600",children:"系统概览和统计信息"})]}),C.jsxs("div",{className:"grid grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-6",children:[C.jsx(_t,{title:"Claude 供应商",value:t?.total||0,subtitle:`启用: ${t?.enabled_count||0}`,trend:t?.total>0?{value:Math.round(t.enabled_count/t.total*100),isPositive:!0}:void 0,icon:C.jsx(et,{className:"h-8 w-8"}),color:"blue",loading:l}),C.jsx(_t,{title:"Codex 供应商",value:s?.total||0,subtitle:`启用: ${s?.enabled_count||0}`,trend:s?.total>0?{value:Math.round(s.enabled_count/s.total*100),isPositive:!0}:void 0,icon:C.jsx(Je,{className:"h-8 w-8"}),color:"green",loading:l}),C.jsx(_t,{title:"Agent 指导文件",value:r?.total||0,subtitle:`Only 类型: ${r?.only_type||0}`,trend:r?.total>0?{value:Math.round(r.only_type/r.total*100),isPositive:r.only_type>r.and_type}:void 0,icon:C.jsx(He,{className:"h-8 w-8"}),color:"yellow",loading:l}),C.jsx(_t,{title:"MCP 服务器",value:a?.total||0,subtitle:`活跃: ${a?.active_count||0}`,trend:a?.total>0?{value:Math.round(a.active_count/a.total*100),isPositive:a.active_rate>=50}:void 0,icon:C.jsx(ComputerDesktopIcon,{className:"h-8 w-8"}),color:"purple",loading:l}),C.jsx(_t,{title:"通用配置",value:n?.total||0,subtitle:`启用: ${n?.active||0}`,trend:n?.total>0?{value:Math.round(n.active/n.total*100),isPositive:n.active_rate>=50}:void 0,icon:C.jsx(Le,{className:"h-8 w-8"}),color:"red",loading:l})]}),C.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[C.jsxs(jt,{children:[C.jsx(ft,{children:C.jsx(bt,{children:"供应商统计"})}),C.jsx(vt,{children:C.jsx("div",{className:"space-y-4",children:C.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[C.jsxs("div",{children:[C.jsx("h4",{className:"text-sm font-medium text-gray-600",children:"Claude 供应商"}),C.jsxs("div",{className:"mt-1 space-y-2",children:[C.jsxs("div",{className:"flex justify-between",children:[C.jsx("span",{className:"text-sm text-gray-500",children:"总数"}),C.jsx("span",{className:"text-sm font-medium",children:t?.total||0})]}),C.jsxs("div",{className:"flex justify-between",children:[C.jsx("span",{className:"text-sm text-gray-500",children:"启用"}),C.jsx("span",{className:"text-sm font-medium text-green-600",children:t?.enabled_count||0})]}),C.jsxs("div",{className:"flex justify-between",children:[C.jsx("span",{className:"text-sm text-gray-500",children:"禁用"}),C.jsx("span",{className:"text-sm font-medium text-red-600",children:t?.disabled_count||0})]}),C.jsxs("div",{className:"flex justify-between",children:[C.jsx("span",{className:"text-sm text-gray-500",children:"付费类型"}),C.jsx("span",{className:"text-sm font-medium",children:t?.paid_type||0})]})]})]}),C.jsxs("div",{children:[C.jsx("h4",{className:"text-sm font-medium text-gray-600",children:"Codex 供应商"}),C.jsxs("div",{className:"mt-1 space-y-2",children:[C.jsxs("div",{className:"flex justify-between",children:[C.jsx("span",{className:"text-sm text-gray-500",children:"总数"}),C.jsx("span",{className:"text-sm font-medium",children:s?.total||0})]}),C.jsxs("div",{className:"flex justify-between",children:[C.jsx("span",{className:"text-sm text-gray-500",children:"启用"}),C.jsx("span",{className:"text-sm font-medium text-green-600",children:s?.enabled_count||0})]}),C.jsxs("div",{className:"flex justify-between",children:[C.jsx("span",{className:"text-sm text-gray-500",children:"禁用"}),C.jsx("span",{className:"text-sm font-medium text-red-600",children:s?.disabled_count||0})]}),C.jsxs("div",{className:"flex justify-between",children:[C.jsx("span",{className:"text-sm text-gray-500",children:"付费类型"}),C.jsx("span",{className:"text-sm font-medium",children:s?.paid_type||0})]})]})]})]})})})]}),C.jsxs(jt,{children:[C.jsx(ft,{children:C.jsx(bt,{children:"服务和配置统计"})}),C.jsx(vt,{children:C.jsxs("div",{className:"space-y-4",children:[C.jsxs("div",{children:[C.jsx("h4",{className:"text-sm font-medium text-gray-600",children:"MCP 服务器"}),C.jsxs("div",{className:"mt-1 space-y-2",children:[C.jsxs("div",{className:"flex justify-between",children:[C.jsx("span",{className:"text-sm text-gray-500",children:"总数"}),C.jsx("span",{className:"text-sm font-medium",children:a?.total||0})]}),C.jsxs("div",{className:"flex justify-between",children:[C.jsx("span",{className:"text-sm text-gray-500",children:"活跃"}),C.jsx("span",{className:"text-sm font-medium text-green-600",children:a?.active_count||0})]}),C.jsxs("div",{className:"flex justify-between",children:[C.jsx("span",{className:"text-sm text-gray-500",children:"非活跃"}),C.jsx("span",{className:"text-sm font-medium text-red-600",children:a?.inactive_count||0})]}),C.jsxs("div",{className:"flex justify-between",children:[C.jsx("span",{className:"text-sm text-gray-500",children:"Stdio 类型"}),C.jsx("span",{className:"text-sm font-medium",children:a?.stdio_type||0})]})]})]}),C.jsxs("div",{children:[C.jsx("h4",{className:"text-sm font-medium text-gray-600",children:"Agent 指导文件"}),C.jsxs("div",{className:"mt-1 space-y-2",children:[C.jsxs("div",{className:"flex justify-between",children:[C.jsx("span",{className:"text-sm text-gray-500",children:"Only 类型"}),C.jsx("span",{className:"text-sm font-medium",children:r?.only_type||0})]}),C.jsxs("div",{className:"flex justify-between",children:[C.jsx("span",{className:"text-sm text-gray-500",children:"And 类型"}),C.jsx("span",{className:"text-sm font-medium",children:r?.and_type||0})]})]})]}),C.jsxs("div",{children:[C.jsx("h4",{className:"text-sm font-medium text-gray-600",children:"通用配置"}),C.jsxs("div",{className:"mt-1 space-y-2",children:[C.jsxs("div",{className:"flex justify-between",children:[C.jsx("span",{className:"text-sm text-gray-500",children:"总数"}),C.jsx("span",{className:"text-sm font-medium",children:n?.total||0})]}),C.jsxs("div",{className:"flex justify-between",children:[C.jsx("span",{className:"text-sm text-gray-500",children:"启用"}),C.jsx("span",{className:"text-sm font-medium text-green-600",children:n?.active||0})]}),C.jsxs("div",{className:"flex justify-between",children:[C.jsx("span",{className:"text-sm text-gray-500",children:"配置类别"}),C.jsx("span",{className:"text-sm font-medium",children:n?.category_count||0})]})]})]})]})})]})]}),C.jsxs(jt,{children:[C.jsx(ft,{children:C.jsx(bt,{children:"系统状态"})}),C.jsx(vt,{children:C.jsxs("div",{className:"space-y-4",children:[C.jsxs("div",{className:"flex items-center justify-between",children:[C.jsx("span",{className:"text-sm text-gray-600",children:"后端服务"}),C.jsxs("span",{className:"flex items-center",children:[C.jsx("div",{className:"h-2 w-2 bg-green-500 rounded-full"}),C.jsx("span",{className:"ml-2 text-sm font-medium text-green-600",children:"运行中"})]})]}),C.jsxs("div",{className:"flex items-center justify-between",children:[C.jsx("span",{className:"text-sm text-gray-600",children:"数据库连接"}),C.jsxs("span",{className:"flex items-center",children:[C.jsx("div",{className:"h-2 w-2 bg-green-500 rounded-full"}),C.jsx("span",{className:"ml-2 text-sm font-medium text-green-600",children:"正常"})]})]}),C.jsxs("div",{className:"flex items-center justify-between",children:[C.jsx("span",{className:"text-sm text-gray-600",children:"前端应用"}),C.jsxs("span",{className:"flex items-center",children:[C.jsx("div",{className:"h-2 w-2 bg-green-500 rounded-full"}),C.jsx("span",{className:"ml-2 text-sm font-medium text-green-600",children:"正常"})]})]})]})})]})]})};var It=new Proxy({},{get:(e,t)=>{if("__esModule"===t)return{};throw new Error(`You're trying to import \`@heroicons/react/solid/${t}\` from Heroicons v1 but have installed Heroicons v2. Install \`@heroicons/react@v1\` to resolve this error.`)}});function Mt(){const[t,s]=m(H),[r,a]=m($),[n,l]=m(z),[i,d]=m(P),[c]=m(R),[o,x]=e.useState(!1),[h,u]=e.useState(!1),[g,y]=e.useState(!1),[p,j]=e.useState({}),[f,b]=e.useState({}),[v,N]=e.useState({}),w=new ae;e.useEffect(()=>{k()},[c]);const k=async()=>{try{l(!0),d(null);const e=await w.list({limit:100});s(e)}catch(e){d(e instanceof Error?e.message:"加载供应商列表失败")}finally{l(!1)}},E=e=>{const t={};if(e.name?.trim()||(t.name="供应商名称不能为空"),e.url?.trim())try{new URL(e.url)}catch{t.url="请输入有效的URL地址"}else t.url="API地址不能为空";return e.token?.trim()||(t.token="API密钥不能为空"),e.timeout&&e.timeout<1&&(t.timeout="超时时间必须大于0秒"),e.max_retries&&e.max_retries<0&&(t.max_retries="重试次数不能为负数"),e.retry_delay&&e.retry_delay<0&&(t.retry_delay="重试延迟不能为负数"),t},_=()=>{b({}),N({})},S=[{key:"name",title:"供应商名称",render:e=>C.jsx("div",{className:"flex items-center",children:C.jsxs("div",{children:[C.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e.name}),C.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:e.url})]})})},{key:"model",title:"模型",render:e=>C.jsx("span",{className:"text-sm text-gray-900 dark:text-white",children:e.model||"-"})},{key:"token",title:"API密钥",render:e=>C.jsxs("div",{className:"flex items-center space-x-2",children:[C.jsx("span",{className:"text-sm font-mono text-gray-900 dark:text-white",children:p[e.id]?e.token:"•".repeat(Math.min(e.token.length,20))}),C.jsx(yt,{variant:"ghost",size:"sm",onClick:()=>{return t=e.id,void j(e=>({...e,[t]:!e[t]}));var t},className:"p-1",children:p[e.id]?C.jsx(It.EyeOff,{className:"h-4 w-4"}):C.jsx(It.Eye,{className:"h-4 w-4"})})]})},{key:"status",title:"状态",render:e=>C.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium "+(e.is_enabled?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"),children:e.is_enabled?"已启用":"已禁用"})},{key:"timeout",title:"超时设置",render:e=>C.jsxs("span",{className:"text-sm text-gray-900 dark:text-white",children:[e.timeout,"s / ",e.max_retries,"次重试"]})},{key:"actions",title:"操作",render:e=>C.jsxs("div",{className:"flex items-center space-x-2",children:[C.jsx(yt,{variant:e.is_enabled?"warning":"success",size:"sm",onClick:()=>(async e=>{try{l(!0),await w.update(e.id,{is_enabled:!e.is_enabled}),await k()}catch(t){d(t instanceof Error?t.message:"切换启用状态失败")}finally{l(!1)}})(e),disabled:n,children:e.is_enabled?"禁用":"启用"}),C.jsx(yt,{variant:"primary",size:"sm",onClick:()=>(e=>{a(e),b({...e}),N({}),u(!0)})(e),disabled:n,children:C.jsx(It.Edit,{className:"h-4 w-4"})}),C.jsx(yt,{variant:"danger",size:"sm",onClick:()=>(e=>{a(e),y(!0)})(e),disabled:n,children:C.jsx(It.Trash2,{className:"h-4 w-4"})})]})}];return C.jsxs("div",{className:"space-y-6",children:[C.jsxs("div",{className:"flex items-center justify-between",children:[C.jsxs("div",{children:[C.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Claude供应商管理"}),C.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"管理Claude API供应商配置，包括密钥、超时设置等"})]}),C.jsxs(yt,{variant:"primary",onClick:()=>{_(),x(!0)},disabled:n,className:"flex items-center space-x-2",children:[C.jsx(It.Plus,{className:"h-4 w-4"}),C.jsx("span",{children:"添加供应商"})]})]}),C.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[C.jsxs(jt,{children:[C.jsx(jt.Header,{children:C.jsx(jt.Title,{children:"总供应商数"})}),C.jsx(jt.Content,{children:C.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:t?.total||0})})]}),C.jsxs(jt,{children:[C.jsx(jt.Header,{children:C.jsx(jt.Title,{children:"已启用"})}),C.jsx(jt.Content,{children:C.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:t?.data?.filter(e=>e.is_enabled).length||0})})]}),C.jsxs(jt,{children:[C.jsx(jt.Header,{children:C.jsx(jt.Title,{children:"已禁用"})}),C.jsx(jt.Content,{children:C.jsx("div",{className:"text-2xl font-bold text-gray-600 dark:text-gray-400",children:t?.data?.filter(e=>!e.is_enabled).length||0})})]})]}),C.jsxs(jt,{children:[C.jsx(jt.Header,{children:C.jsx(jt.Title,{children:"供应商列表"})}),C.jsx(jt.Content,{children:C.jsx(Et,{data:t?.data||[],columns:S,loading:n,emptyState:{title:"暂无供应商",description:'请点击"添加供应商"按钮来创建第一个Claude供应商配置'}})})]}),C.jsx(wt,{isOpen:o,onClose:()=>x(!1),title:"添加Claude供应商",footer:C.jsxs("div",{className:"flex justify-end space-x-3",children:[C.jsx(yt,{variant:"secondary",onClick:()=>x(!1),disabled:n,children:"取消"}),C.jsx(yt,{variant:"primary",onClick:async()=>{const e=E(f);if(Object.keys(e).length>0)N(e);else try{l(!0),await w.create(f),x(!1),_(),await k()}catch(t){d(t instanceof Error?t.message:"创建供应商失败")}finally{l(!1)}},disabled:n,children:"创建"})]}),children:C.jsxs("div",{className:"space-y-4",children:[C.jsx(Ct,{label:"供应商名称",value:f.name||"",onChange:e=>b(t=>({...t,name:e})),placeholder:"请输入供应商名称",error:v.name,required:!0}),C.jsx(Ct,{label:"API地址",value:f.url||"",onChange:e=>b(t=>({...t,url:e})),placeholder:"https://api.anthropic.com",error:v.url,required:!0}),C.jsx(Ct,{label:"模型",value:f.model||"",onChange:e=>b(t=>({...t,model:e})),placeholder:"claude-3-sonnet-20240229"}),C.jsx(Ct,{label:"API密钥",value:f.token||"",onChange:e=>b(t=>({...t,token:e})),placeholder:"请输入API密钥",type:"password",error:v.token,required:!0}),C.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[C.jsx(Ct,{label:"超时时间(秒)",value:f.timeout?.toString()||"",onChange:e=>b(t=>({...t,timeout:e?parseInt(e):void 0})),placeholder:"30",type:"number",error:v.timeout}),C.jsx(Ct,{label:"最大重试次数",value:f.max_retries?.toString()||"",onChange:e=>b(t=>({...t,max_retries:e?parseInt(e):void 0})),placeholder:"3",type:"number",error:v.max_retries}),C.jsx(Ct,{label:"重试延迟(秒)",value:f.retry_delay?.toString()||"",onChange:e=>b(t=>({...t,retry_delay:e?parseInt(e):void 0})),placeholder:"1",type:"number",error:v.retry_delay})]})]})}),C.jsx(wt,{isOpen:h,onClose:()=>u(!1),title:"编辑Claude供应商",footer:C.jsxs("div",{className:"flex justify-end space-x-3",children:[C.jsx(yt,{variant:"secondary",onClick:()=>u(!1),disabled:n,children:"取消"}),C.jsx(yt,{variant:"primary",onClick:async()=>{if(!r)return;const e=E(f);if(Object.keys(e).length>0)N(e);else try{l(!0),await w.update(r.id,f),u(!1),a(null),_(),await k()}catch(t){d(t instanceof Error?t.message:"更新供应商失败")}finally{l(!1)}},disabled:n,children:"保存"})]}),children:C.jsxs("div",{className:"space-y-4",children:[C.jsx(Ct,{label:"供应商名称",value:f.name||"",onChange:e=>b(t=>({...t,name:e})),placeholder:"请输入供应商名称",error:v.name,required:!0}),C.jsx(Ct,{label:"API地址",value:f.url||"",onChange:e=>b(t=>({...t,url:e})),placeholder:"https://api.anthropic.com",error:v.url,required:!0}),C.jsx(Ct,{label:"模型",value:f.model||"",onChange:e=>b(t=>({...t,model:e})),placeholder:"claude-3-sonnet-20240229"}),C.jsx(Ct,{label:"API密钥",value:f.token||"",onChange:e=>b(t=>({...t,token:e})),placeholder:"请输入API密钥",type:"password",error:v.token,required:!0}),C.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[C.jsx(Ct,{label:"超时时间(秒)",value:f.timeout?.toString()||"",onChange:e=>b(t=>({...t,timeout:e?parseInt(e):void 0})),placeholder:"30",type:"number",error:v.timeout}),C.jsx(Ct,{label:"最大重试次数",value:f.max_retries?.toString()||"",onChange:e=>b(t=>({...t,max_retries:e?parseInt(e):void 0})),placeholder:"3",type:"number",error:v.max_retries}),C.jsx(Ct,{label:"重试延迟(秒)",value:f.retry_delay?.toString()||"",onChange:e=>b(t=>({...t,retry_delay:e?parseInt(e):void 0})),placeholder:"1",type:"number",error:v.retry_delay})]})]})}),C.jsx(wt,{isOpen:g,onClose:()=>y(!1),title:"删除供应商",size:"sm",footer:C.jsxs("div",{className:"flex justify-end space-x-3",children:[C.jsx(yt,{variant:"secondary",onClick:()=>y(!1),disabled:n,children:"取消"}),C.jsx(yt,{variant:"danger",onClick:async()=>{if(r)try{l(!0),await w.deleteById(r.id),y(!1),a(null),await k()}catch(e){d(e instanceof Error?e.message:"删除供应商失败")}finally{l(!1)}},disabled:n,children:"删除"})]}),children:C.jsx("div",{className:"text-center",children:C.jsxs("div",{className:"mt-2",children:[C.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["确定要删除供应商 ",C.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:r?.name})," 吗？"]}),C.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"此操作不可撤销，所有相关配置将被永久删除。"})]})})})]})}function Tt(){const[t,s]=m(D),[r,a]=m(q),[n,l]=m(z),[i,d]=m(P),[c]=m(R),[o,x]=e.useState(!1),[h,u]=e.useState(!1),[g,y]=e.useState(!1),[p,j]=e.useState({}),[f,b]=e.useState({}),[v,N]=e.useState({}),w=new ne;e.useEffect(()=>{k()},[c]);const k=async()=>{try{l(!0),d(null);const e=await w.list({limit:100});s(e)}catch(e){d(e instanceof Error?e.message:"加载供应商列表失败")}finally{l(!1)}},E=e=>{const t={};if(e.name?.trim()||(t.name="供应商名称不能为空"),e.url?.trim())try{new URL(e.url)}catch{t.url="请输入有效的URL地址"}else t.url="API地址不能为空";return e.token?.trim()||(t.token="API密钥不能为空"),e.timeout&&e.timeout<1&&(t.timeout="超时时间必须大于0秒"),t},_=()=>{b({}),N({})},S=[{key:"name",title:"供应商名称",render:e=>C.jsxs("div",{className:"flex items-center",children:[C.jsx("div",{className:"flex-shrink-0 h-10 w-10 bg-blue-100 rounded-full flex items-center justify-center",children:C.jsx(It.Cog,{className:"h-6 w-6 text-blue-600"})}),C.jsxs("div",{className:"ml-4",children:[C.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e.name}),C.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:e.url})]})]})},{key:"version",title:"API版本",render:e=>C.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",children:e.version||"v1"})},{key:"token",title:"API密钥",render:e=>C.jsxs("div",{className:"flex items-center space-x-2",children:[C.jsx(It.Key,{className:"h-4 w-4 text-gray-400"}),C.jsx("span",{className:"text-sm font-mono text-gray-900 dark:text-white",children:p[e.id]?e.token:"•".repeat(Math.min(e.token.length,20))}),C.jsx(yt,{variant:"ghost",size:"sm",onClick:()=>{return t=e.id,void j(e=>({...e,[t]:!e[t]}));var t},className:"p-1",children:p[e.id]?C.jsx(It.EyeOff,{className:"h-4 w-4"}):C.jsx(It.Eye,{className:"h-4 w-4"})})]})},{key:"status",title:"状态",render:e=>C.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium "+(e.is_enabled?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"),children:e.is_enabled?"已启用":"已禁用"})},{key:"timeout",title:"超时设置",render:e=>C.jsxs("span",{className:"text-sm text-gray-900 dark:text-white",children:[e.timeout,"s"]})},{key:"actions",title:"操作",render:e=>C.jsxs("div",{className:"flex items-center space-x-2",children:[C.jsx(yt,{variant:e.is_enabled?"warning":"success",size:"sm",onClick:()=>(async e=>{try{l(!0),await w.update(e.id,{is_enabled:!e.is_enabled}),await k()}catch(t){d(t instanceof Error?t.message:"切换启用状态失败")}finally{l(!1)}})(e),disabled:n,children:e.is_enabled?"禁用":"启用"}),C.jsx(yt,{variant:"primary",size:"sm",onClick:()=>(e=>{a(e),b({...e}),N({}),u(!0)})(e),disabled:n,children:C.jsx(It.Edit,{className:"h-4 w-4"})}),C.jsx(yt,{variant:"danger",size:"sm",onClick:()=>(e=>{a(e),y(!0)})(e),disabled:n,children:C.jsx(It.Trash2,{className:"h-4 w-4"})})]})}];return C.jsxs("div",{className:"space-y-6",children:[C.jsxs("div",{className:"flex items-center justify-between",children:[C.jsxs("div",{children:[C.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Codex供应商管理"}),C.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"管理Codex API供应商配置，包括密钥、版本设置等"})]}),C.jsxs(yt,{variant:"primary",onClick:()=>{_(),x(!0)},disabled:n,className:"flex items-center space-x-2",children:[C.jsx(It.Plus,{className:"h-4 w-4"}),C.jsx("span",{children:"添加供应商"})]})]}),C.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[C.jsxs(jt,{children:[C.jsx(jt.Header,{children:C.jsx(jt.Title,{children:"总供应商数"})}),C.jsx(jt.Content,{children:C.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:t?.total||0})})]}),C.jsxs(jt,{children:[C.jsx(jt.Header,{children:C.jsx(jt.Title,{children:"已启用"})}),C.jsx(jt.Content,{children:C.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:t?.data?.filter(e=>e.is_enabled).length||0})})]}),C.jsxs(jt,{children:[C.jsx(jt.Header,{children:C.jsx(jt.Title,{children:"已禁用"})}),C.jsx(jt.Content,{children:C.jsx("div",{className:"text-2xl font-bold text-gray-600 dark:text-gray-400",children:t?.data?.filter(e=>!e.is_enabled).length||0})})]})]}),C.jsxs(jt,{children:[C.jsx(jt.Header,{children:C.jsx(jt.Title,{children:"供应商列表"})}),C.jsx(jt.Content,{children:C.jsx(Et,{data:t?.data||[],columns:S,loading:n,emptyState:{title:"暂无供应商",description:'请点击"添加供应商"按钮来创建第一个Codex供应商配置'}})})]}),C.jsx(wt,{isOpen:o,onClose:()=>x(!1),title:"添加Codex供应商",footer:C.jsxs("div",{className:"flex justify-end space-x-3",children:[C.jsx(yt,{variant:"secondary",onClick:()=>x(!1),disabled:n,children:"取消"}),C.jsx(yt,{variant:"primary",onClick:async()=>{const e=E(f);if(Object.keys(e).length>0)N(e);else try{l(!0),await w.create(f),x(!1),_(),await k()}catch(t){d(t instanceof Error?t.message:"创建供应商失败")}finally{l(!1)}},disabled:n,children:"创建"})]}),children:C.jsxs("div",{className:"space-y-4",children:[C.jsx(Ct,{label:"供应商名称",value:f.name||"",onChange:e=>b(t=>({...t,name:e})),placeholder:"请输入供应商名称",error:v.name,required:!0}),C.jsx(Ct,{label:"API地址",value:f.url||"",onChange:e=>b(t=>({...t,url:e})),placeholder:"https://api.openai.com/v1",error:v.url,required:!0}),C.jsx(Ct,{label:"API版本",value:f.version||"",onChange:e=>b(t=>({...t,version:e})),placeholder:"v1"}),C.jsx(Ct,{label:"API密钥",value:f.token||"",onChange:e=>b(t=>({...t,token:e})),placeholder:"请输入API密钥",type:"password",error:v.token,required:!0}),C.jsx(Ct,{label:"超时时间(秒)",value:f.timeout?.toString()||"",onChange:e=>b(t=>({...t,timeout:e?parseInt(e):void 0})),placeholder:"30",type:"number",error:v.timeout})]})}),C.jsx(wt,{isOpen:h,onClose:()=>u(!1),title:"编辑Codex供应商",footer:C.jsxs("div",{className:"flex justify-end space-x-3",children:[C.jsx(yt,{variant:"secondary",onClick:()=>u(!1),disabled:n,children:"取消"}),C.jsx(yt,{variant:"primary",onClick:async()=>{if(!r)return;const e=E(f);if(Object.keys(e).length>0)N(e);else try{l(!0),await w.update(r.id,f),u(!1),a(null),_(),await k()}catch(t){d(t instanceof Error?t.message:"更新供应商失败")}finally{l(!1)}},disabled:n,children:"保存"})]}),children:C.jsxs("div",{className:"space-y-4",children:[C.jsx(Ct,{label:"供应商名称",value:f.name||"",onChange:e=>b(t=>({...t,name:e})),placeholder:"请输入供应商名称",error:v.name,required:!0}),C.jsx(Ct,{label:"API地址",value:f.url||"",onChange:e=>b(t=>({...t,url:e})),placeholder:"https://api.openai.com/v1",error:v.url,required:!0}),C.jsx(Ct,{label:"API版本",value:f.version||"",onChange:e=>b(t=>({...t,version:e})),placeholder:"v1"}),C.jsx(Ct,{label:"API密钥",value:f.token||"",onChange:e=>b(t=>({...t,token:e})),placeholder:"请输入API密钥",type:"password",error:v.token,required:!0}),C.jsx(Ct,{label:"超时时间(秒)",value:f.timeout?.toString()||"",onChange:e=>b(t=>({...t,timeout:e?parseInt(e):void 0})),placeholder:"30",type:"number",error:v.timeout})]})}),C.jsx(wt,{isOpen:g,onClose:()=>y(!1),title:"删除供应商",size:"sm",footer:C.jsxs("div",{className:"flex justify-end space-x-3",children:[C.jsx(yt,{variant:"secondary",onClick:()=>y(!1),disabled:n,children:"取消"}),C.jsx(yt,{variant:"danger",onClick:async()=>{if(r)try{l(!0),await w.deleteById(r.id),y(!1),a(null),await k()}catch(e){d(e instanceof Error?e.message:"删除供应商失败")}finally{l(!1)}},disabled:n,children:"删除"})]}),children:C.jsx("div",{className:"text-center",children:C.jsxs("div",{className:"mt-2",children:[C.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["确定要删除供应商 ",C.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:r?.name})," 吗？"]}),C.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"此操作不可撤销，所有相关配置将被永久删除。"})]})})})]})}function At(){const[t,s]=m(F),[r,a]=m(U),[n,l]=m(z),[i,d]=m(P),[c]=m(R),[o,x]=e.useState(!1),[h,u]=e.useState(!1),[g,y]=e.useState(!1),[p,j]=e.useState(!1),[f,b]=e.useState({}),[v,N]=e.useState({}),w=new le;e.useEffect(()=>{k()},[c]);const k=async()=>{try{l(!0),d(null);const e=await w.list({limit:100});s(e)}catch(e){d(e instanceof Error?e.message:"加载指导文件列表失败")}finally{l(!1)}},E=e=>{const t={};if(e.name?.trim()||(t.name="指导文件名称不能为空"),e.content?.trim()||(t.content="指导内容不能为空"),e.category?.trim()||(t.category="分类不能为空"),e.tags&&"string"==typeof e.tags)try{JSON.parse(e.tags)}catch{t.tags="标签格式不正确，请输入有效的JSON数组"}return t},_=()=>{b({}),N({})},S=e=>{a(e),j(!0)},I=e=>{try{return(Array.isArray(e)?e:JSON.parse(e||"[]")).slice(0,3).map(e=>C.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-indigo-100 text-indigo-800 dark:bg-indigo-900 dark:text-indigo-200 mr-1 mb-1",children:e},e))}catch{return null}},M=(e,t=100)=>e.length<=t?e:e.substring(0,t)+"...",T=[{key:"name",title:"指导文件名称",render:e=>C.jsxs("div",{className:"flex items-center",children:[C.jsx("div",{className:"flex-shrink-0 h-10 w-10 bg-indigo-100 rounded-full flex items-center justify-center",children:C.jsx(It.DocumentText,{className:"h-6 w-6 text-indigo-600"})}),C.jsxs("div",{className:"ml-4",children:[C.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e.name}),C.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:e.category})]})]})},{key:"content",title:"内容预览",render:e=>C.jsxs("div",{className:"max-w-md",children:[C.jsx("p",{className:"text-sm text-gray-900 dark:text-white line-clamp-2",children:M(e.content)}),e.content.length>100&&C.jsx(yt,{variant:"ghost",size:"sm",onClick:()=>S(e),className:"mt-1 p-0 text-xs",children:"查看完整内容"})]})},{key:"tags",title:"标签",render:e=>C.jsxs("div",{className:"flex flex-wrap",children:[I(e.tags),(()=>{try{const t=Array.isArray(e.tags)?e.tags:JSON.parse(e.tags||"[]");if(t.length>3)return C.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400 ml-1",children:["+",t.length-3]})}catch{return null}})()]})},{key:"status",title:"状态",render:e=>C.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium "+(e.is_enabled?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"),children:e.is_enabled?"已启用":"已禁用"})},{key:"updated_at",title:"更新时间",render:e=>C.jsxs("div",{className:"flex items-center text-sm text-gray-500 dark:text-gray-400",children:[C.jsx(It.Clock,{className:"h-4 w-4 mr-1"}),new Date(e.updated_at).toLocaleDateString("zh-CN")]})},{key:"actions",title:"操作",render:e=>C.jsxs("div",{className:"flex items-center space-x-2",children:[C.jsx(yt,{variant:"ghost",size:"sm",onClick:()=>S(e),disabled:n,children:C.jsx(It.Eye,{className:"h-4 w-4"})}),C.jsx(yt,{variant:e.is_enabled?"warning":"success",size:"sm",onClick:()=>(async e=>{try{l(!0),await w.update(e.id,{is_enabled:!e.is_enabled}),await k()}catch(t){d(t instanceof Error?t.message:"切换启用状态失败")}finally{l(!1)}})(e),disabled:n,children:e.is_enabled?"禁用":"启用"}),C.jsx(yt,{variant:"primary",size:"sm",onClick:()=>(e=>{a(e),b({...e,tags:Array.isArray(e.tags)?JSON.stringify(e.tags):e.tags}),N({}),u(!0)})(e),disabled:n,children:C.jsx(It.Edit,{className:"h-4 w-4"})}),C.jsx(yt,{variant:"danger",size:"sm",onClick:()=>(e=>{a(e),y(!0)})(e),disabled:n,children:C.jsx(It.Trash2,{className:"h-4 w-4"})})]})}];return C.jsxs("div",{className:"space-y-6",children:[C.jsxs("div",{className:"flex items-center justify-between",children:[C.jsxs("div",{children:[C.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Agent指导文件管理"}),C.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"管理AI Agent的指导文件，包括分类、标签和详细内容"})]}),C.jsxs(yt,{variant:"primary",onClick:()=>{_(),b({tags:JSON.stringify([]),is_enabled:!0}),x(!0)},disabled:n,className:"flex items-center space-x-2",children:[C.jsx(It.Plus,{className:"h-4 w-4"}),C.jsx("span",{children:"添加指导文件"})]})]}),C.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[C.jsxs(jt,{children:[C.jsx(jt.Header,{children:C.jsx(jt.Title,{children:"总指导文件数"})}),C.jsx(jt.Content,{children:C.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:t?.total||0})})]}),C.jsxs(jt,{children:[C.jsx(jt.Header,{children:C.jsx(jt.Title,{children:"已启用"})}),C.jsx(jt.Content,{children:C.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:t?.data?.filter(e=>e.is_enabled).length||0})})]}),C.jsxs(jt,{children:[C.jsx(jt.Header,{children:C.jsx(jt.Title,{children:"分类数量"})}),C.jsx(jt.Content,{children:C.jsx("div",{className:"text-2xl font-bold text-indigo-600 dark:text-indigo-400",children:new Set(t?.data?.map(e=>e.category)||[]).size})})]})]}),C.jsxs(jt,{children:[C.jsx(jt.Header,{children:C.jsx(jt.Title,{children:"指导文件列表"})}),C.jsx(jt.Content,{children:C.jsx(Et,{data:t?.data||[],columns:T,loading:n,emptyState:{title:"暂无指导文件",description:'请点击"添加指导文件"按钮来创建第一个Agent指导文件'}})})]}),C.jsx(wt,{isOpen:o,onClose:()=>x(!1),title:"添加Agent指导文件",size:"lg",footer:C.jsxs("div",{className:"flex justify-end space-x-3",children:[C.jsx(yt,{variant:"secondary",onClick:()=>x(!1),disabled:n,children:"取消"}),C.jsx(yt,{variant:"primary",onClick:async()=>{const e=E(f);if(Object.keys(e).length>0)N(e);else try{l(!0);const e={...f,tags:"string"==typeof f.tags?JSON.parse(f.tags):f.tags};await w.create(e),x(!1),_(),await k()}catch(t){d(t instanceof Error?t.message:"创建指导文件失败")}finally{l(!1)}},disabled:n,children:"创建"})]}),children:C.jsxs("div",{className:"space-y-4",children:[C.jsx(Ct,{label:"指导文件名称",value:f.name||"",onChange:e=>b(t=>({...t,name:e})),placeholder:"请输入指导文件名称",error:v.name,required:!0}),C.jsx(Ct,{label:"分类",value:f.category||"",onChange:e=>b(t=>({...t,category:e})),placeholder:"如：编程助手、写作助手等",error:v.category,required:!0}),C.jsx(Ct,{label:"标签",value:f.tags||"",onChange:e=>b(t=>({...t,tags:e})),placeholder:'["编程", "Python", "调试"]',error:v.tags,help:'JSON数组格式，如：["标签1", "标签2"]'}),C.jsxs("div",{className:"space-y-2",children:[C.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:["指导内容 ",C.jsx("span",{className:"text-red-500",children:"*"})]}),C.jsx("textarea",{value:f.content||"",onChange:e=>b(t=>({...t,content:e.target.value})),placeholder:"请输入详细的指导内容和规则...",rows:8,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white "+(v.content?"border-red-500":"")}),v.content&&C.jsx("p",{className:"text-sm text-red-500",children:v.content})]})]})}),C.jsx(wt,{isOpen:h,onClose:()=>u(!1),title:"编辑Agent指导文件",size:"lg",footer:C.jsxs("div",{className:"flex justify-end space-x-3",children:[C.jsx(yt,{variant:"secondary",onClick:()=>u(!1),disabled:n,children:"取消"}),C.jsx(yt,{variant:"primary",onClick:async()=>{if(!r)return;const e=E(f);if(Object.keys(e).length>0)N(e);else try{l(!0);const e={...f,tags:"string"==typeof f.tags?JSON.parse(f.tags):f.tags};await w.update(r.id,e),u(!1),a(null),_(),await k()}catch(t){d(t instanceof Error?t.message:"更新指导文件失败")}finally{l(!1)}},disabled:n,children:"保存"})]}),children:C.jsxs("div",{className:"space-y-4",children:[C.jsx(Ct,{label:"指导文件名称",value:f.name||"",onChange:e=>b(t=>({...t,name:e})),placeholder:"请输入指导文件名称",error:v.name,required:!0}),C.jsx(Ct,{label:"分类",value:f.category||"",onChange:e=>b(t=>({...t,category:e})),placeholder:"如：编程助手、写作助手等",error:v.category,required:!0}),C.jsx(Ct,{label:"标签",value:f.tags||"",onChange:e=>b(t=>({...t,tags:e})),placeholder:'["编程", "Python", "调试"]',error:v.tags,help:'JSON数组格式，如：["标签1", "标签2"]'}),C.jsxs("div",{className:"space-y-2",children:[C.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:["指导内容 ",C.jsx("span",{className:"text-red-500",children:"*"})]}),C.jsx("textarea",{value:f.content||"",onChange:e=>b(t=>({...t,content:e.target.value})),placeholder:"请输入详细的指导内容和规则...",rows:8,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white "+(v.content?"border-red-500":"")}),v.content&&C.jsx("p",{className:"text-sm text-red-500",children:v.content})]})]})}),C.jsx(wt,{isOpen:p,onClose:()=>j(!1),title:r?.name,size:"lg",footer:C.jsx("div",{className:"flex justify-end",children:C.jsx(yt,{variant:"secondary",onClick:()=>j(!1),children:"关闭"})}),children:r&&C.jsxs("div",{className:"space-y-4",children:[C.jsx("div",{className:"flex items-center space-x-4",children:C.jsxs("div",{children:[C.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:r.name}),C.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["分类：",r.category]})]})}),C.jsx("div",{className:"flex flex-wrap gap-2",children:I(r.tags)}),C.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-4",children:[C.jsx("h4",{className:"text-sm font-medium text-gray-900 dark:text-white mb-2",children:"指导内容"}),C.jsx("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-4",children:C.jsx("pre",{className:"whitespace-pre-wrap text-sm text-gray-900 dark:text-white",children:r.content})})]})]})}),C.jsx(wt,{isOpen:g,onClose:()=>y(!1),title:"删除指导文件",size:"sm",footer:C.jsxs("div",{className:"flex justify-end space-x-3",children:[C.jsx(yt,{variant:"secondary",onClick:()=>y(!1),disabled:n,children:"取消"}),C.jsx(yt,{variant:"danger",onClick:async()=>{if(r)try{l(!0),await w.deleteById(r.id),y(!1),a(null),await k()}catch(e){d(e instanceof Error?e.message:"删除指导文件失败")}finally{l(!1)}},disabled:n,children:"删除"})]}),children:C.jsx("div",{className:"text-center",children:C.jsxs("div",{className:"mt-2",children:[C.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["确定要删除指导文件 ",C.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:r?.name})," 吗？"]}),C.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"此操作不可撤销，所有相关配置将被永久删除。"})]})})})]})}function Ot(){const[t,s]=m(Z),[r,a]=m(J),[n,l]=m(z),[i,d]=m(P),[c]=m(R),[o,x]=e.useState(!1),[h,u]=e.useState(!1),[g,y]=e.useState(!1),[p,j]=e.useState({}),[f,b]=e.useState({}),[v,N]=e.useState({}),w=new ie;e.useEffect(()=>{k()},[c]);const k=async()=>{try{l(!0),d(null);const e=await w.list({limit:100});s(e)}catch(e){d(e instanceof Error?e.message:"加载MCP服务器列表失败")}finally{l(!1)}},E=e=>{const t={};return e.name?.trim()||(t.name="服务器名称不能为空"),e.host?.trim()||(t.host="主机地址不能为空"),e.port&&(e.port<1||e.port>65535)&&(t.port="端口号必须在1-65535之间"),e.timeout&&e.timeout<1&&(t.timeout="超时时间必须大于0秒"),e.max_connections&&e.max_connections<1&&(t.max_connections="最大连接数必须大于0"),e.retry_count&&e.retry_count<0&&(t.retry_count="重试次数不能为负数"),t},_=()=>{b({}),N({})},S=e=>{const t=e.protocol||"http",s=e.port||("https"===t?443:80);return`${t}://${e.host}:${s}`},I=[{key:"name",title:"服务器名称",render:e=>C.jsxs("div",{className:"flex items-center",children:[C.jsx("div",{className:"flex-shrink-0 h-10 w-10 bg-purple-100 rounded-full flex items-center justify-center",children:C.jsx(It.Server,{className:"h-6 w-6 text-purple-600"})}),C.jsxs("div",{className:"ml-4",children:[C.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e.name}),C.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:e.description||"无描述"})]})]})},{key:"address",title:"服务器地址",render:e=>C.jsxs("div",{className:"flex items-center space-x-2",children:[C.jsx(It.Link,{className:"h-4 w-4 text-gray-400"}),C.jsx("span",{className:"text-sm font-mono text-gray-900 dark:text-white",children:S(e)})]})},{key:"token",title:"认证Token",render:e=>C.jsxs("div",{className:"flex items-center space-x-2",children:[C.jsx("span",{className:"text-sm font-mono text-gray-900 dark:text-white",children:e.auth_token?p[e.id]?e.auth_token:"•".repeat(Math.min(e.auth_token.length,16)):"无认证"}),e.auth_token&&C.jsx(yt,{variant:"ghost",size:"sm",onClick:()=>{return t=e.id,void j(e=>({...e,[t]:!e[t]}));var t},className:"p-1",children:p[e.id]?C.jsx(It.EyeOff,{className:"h-4 w-4"}):C.jsx(It.Eye,{className:"h-4 w-4"})})]})},{key:"connection",title:"连接配置",render:e=>C.jsxs("div",{className:"text-sm text-gray-900 dark:text-white",children:[C.jsxs("div",{children:["最大连接：",e.max_connections]}),C.jsxs("div",{children:["超时：",e.timeout,"s"]}),C.jsxs("div",{children:["重试：",e.retry_count,"次"]})]})},{key:"status",title:"状态",render:e=>C.jsxs("div",{className:"flex flex-col space-y-1",children:[C.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium "+(e.is_enabled?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"),children:e.is_enabled?"已启用":"已禁用"}),C.jsxs("div",{className:"flex items-center text-xs text-gray-500 dark:text-gray-400",children:[C.jsx(It.Activity,{className:"h-3 w-3 mr-1"}),e.is_enabled?"运行中":"已停止"]})]})},{key:"actions",title:"操作",render:e=>C.jsxs("div",{className:"flex items-center space-x-2",children:[C.jsx(yt,{variant:e.is_enabled?"warning":"success",size:"sm",onClick:()=>(async e=>{try{l(!0),await w.update(e.id,{is_enabled:!e.is_enabled}),await k()}catch(t){d(t instanceof Error?t.message:"切换启用状态失败")}finally{l(!1)}})(e),disabled:n,children:e.is_enabled?"禁用":"启用"}),C.jsx(yt,{variant:"primary",size:"sm",onClick:()=>(e=>{a(e),b({...e}),N({}),u(!0)})(e),disabled:n,children:C.jsx(It.Edit,{className:"h-4 w-4"})}),C.jsx(yt,{variant:"danger",size:"sm",onClick:()=>(e=>{a(e),y(!0)})(e),disabled:n,children:C.jsx(It.Trash2,{className:"h-4 w-4"})})]})}];return C.jsxs("div",{className:"space-y-6",children:[C.jsxs("div",{className:"flex items-center justify-between",children:[C.jsxs("div",{children:[C.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"MCP服务器管理"}),C.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"管理Model Context Protocol服务器配置，包括连接设置和认证信息"})]}),C.jsxs(yt,{variant:"primary",onClick:()=>{_(),b({port:8080,protocol:"http",is_enabled:!0,timeout:30,max_connections:10,retry_count:3}),x(!0)},disabled:n,className:"flex items-center space-x-2",children:[C.jsx(It.Plus,{className:"h-4 w-4"}),C.jsx("span",{children:"添加服务器"})]})]}),C.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[C.jsxs(jt,{children:[C.jsx(jt.Header,{children:C.jsx(jt.Title,{children:"总服务器数"})}),C.jsx(jt.Content,{children:C.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:t?.total||0})})]}),C.jsxs(jt,{children:[C.jsx(jt.Header,{children:C.jsx(jt.Title,{children:"已启用"})}),C.jsx(jt.Content,{children:C.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:t?.data?.filter(e=>e.is_enabled).length||0})})]}),C.jsxs(jt,{children:[C.jsx(jt.Header,{children:C.jsx(jt.Title,{children:"总连接容量"})}),C.jsx(jt.Content,{children:C.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:t?.data?.reduce((e,t)=>e+(t.max_connections||0),0)||0})})]})]}),C.jsxs(jt,{children:[C.jsx(jt.Header,{children:C.jsx(jt.Title,{children:"MCP服务器列表"})}),C.jsx(jt.Content,{children:C.jsx(Et,{data:t?.data||[],columns:I,loading:n,emptyState:{title:"暂无MCP服务器",description:'请点击"添加服务器"按钮来创建第一个MCP服务器配置'}})})]}),C.jsx(wt,{isOpen:o,onClose:()=>x(!1),title:"添加MCP服务器",footer:C.jsxs("div",{className:"flex justify-end space-x-3",children:[C.jsx(yt,{variant:"secondary",onClick:()=>x(!1),disabled:n,children:"取消"}),C.jsx(yt,{variant:"primary",onClick:async()=>{const e=E(f);if(Object.keys(e).length>0)N(e);else try{l(!0),await w.create(f),x(!1),_(),await k()}catch(t){d(t instanceof Error?t.message:"创建MCP服务器失败")}finally{l(!1)}},disabled:n,children:"创建"})]}),children:C.jsxs("div",{className:"space-y-4",children:[C.jsx(Ct,{label:"服务器名称",value:f.name||"",onChange:e=>b(t=>({...t,name:e})),placeholder:"请输入服务器名称",error:v.name,required:!0}),C.jsx(Ct,{label:"描述",value:f.description||"",onChange:e=>b(t=>({...t,description:e})),placeholder:"服务器功能描述（可选）"}),C.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[C.jsx(Ct,{label:"主机地址",value:f.host||"",onChange:e=>b(t=>({...t,host:e})),placeholder:"localhost",error:v.host,required:!0}),C.jsx(Ct,{label:"端口号",value:f.port?.toString()||"",onChange:e=>b(t=>({...t,port:e?parseInt(e):void 0})),placeholder:"8080",type:"number",error:v.port})]}),C.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[C.jsx(Ct,{label:"协议",value:f.protocol||"",onChange:e=>b(t=>({...t,protocol:e})),type:"select",options:[{label:"HTTP",value:"http"},{label:"HTTPS",value:"https"}]}),C.jsx(Ct,{label:"认证Token",value:f.auth_token||"",onChange:e=>b(t=>({...t,auth_token:e})),placeholder:"服务器认证Token（可选）",type:"password"})]}),C.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[C.jsx(Ct,{label:"超时时间(秒)",value:f.timeout?.toString()||"",onChange:e=>b(t=>({...t,timeout:e?parseInt(e):void 0})),placeholder:"30",type:"number",error:v.timeout}),C.jsx(Ct,{label:"最大连接数",value:f.max_connections?.toString()||"",onChange:e=>b(t=>({...t,max_connections:e?parseInt(e):void 0})),placeholder:"10",type:"number",error:v.max_connections}),C.jsx(Ct,{label:"重试次数",value:f.retry_count?.toString()||"",onChange:e=>b(t=>({...t,retry_count:e?parseInt(e):void 0})),placeholder:"3",type:"number",error:v.retry_count})]})]})}),C.jsx(wt,{isOpen:h,onClose:()=>u(!1),title:"编辑MCP服务器",footer:C.jsxs("div",{className:"flex justify-end space-x-3",children:[C.jsx(yt,{variant:"secondary",onClick:()=>u(!1),disabled:n,children:"取消"}),C.jsx(yt,{variant:"primary",onClick:async()=>{if(!r)return;const e=E(f);if(Object.keys(e).length>0)N(e);else try{l(!0),await w.update(r.id,f),u(!1),a(null),_(),await k()}catch(t){d(t instanceof Error?t.message:"更新MCP服务器失败")}finally{l(!1)}},disabled:n,children:"保存"})]}),children:C.jsxs("div",{className:"space-y-4",children:[C.jsx(Ct,{label:"服务器名称",value:f.name||"",onChange:e=>b(t=>({...t,name:e})),placeholder:"请输入服务器名称",error:v.name,required:!0}),C.jsx(Ct,{label:"描述",value:f.description||"",onChange:e=>b(t=>({...t,description:e})),placeholder:"服务器功能描述（可选）"}),C.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[C.jsx(Ct,{label:"主机地址",value:f.host||"",onChange:e=>b(t=>({...t,host:e})),placeholder:"localhost",error:v.host,required:!0}),C.jsx(Ct,{label:"端口号",value:f.port?.toString()||"",onChange:e=>b(t=>({...t,port:e?parseInt(e):void 0})),placeholder:"8080",type:"number",error:v.port})]}),C.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[C.jsx(Ct,{label:"协议",value:f.protocol||"",onChange:e=>b(t=>({...t,protocol:e})),type:"select",options:[{label:"HTTP",value:"http"},{label:"HTTPS",value:"https"}]}),C.jsx(Ct,{label:"认证Token",value:f.auth_token||"",onChange:e=>b(t=>({...t,auth_token:e})),placeholder:"服务器认证Token（可选）",type:"password"})]}),C.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[C.jsx(Ct,{label:"超时时间(秒)",value:f.timeout?.toString()||"",onChange:e=>b(t=>({...t,timeout:e?parseInt(e):void 0})),placeholder:"30",type:"number",error:v.timeout}),C.jsx(Ct,{label:"最大连接数",value:f.max_connections?.toString()||"",onChange:e=>b(t=>({...t,max_connections:e?parseInt(e):void 0})),placeholder:"10",type:"number",error:v.max_connections}),C.jsx(Ct,{label:"重试次数",value:f.retry_count?.toString()||"",onChange:e=>b(t=>({...t,retry_count:e?parseInt(e):void 0})),placeholder:"3",type:"number",error:v.retry_count})]})]})}),C.jsx(wt,{isOpen:g,onClose:()=>y(!1),title:"删除MCP服务器",size:"sm",footer:C.jsxs("div",{className:"flex justify-end space-x-3",children:[C.jsx(yt,{variant:"secondary",onClick:()=>y(!1),disabled:n,children:"取消"}),C.jsx(yt,{variant:"danger",onClick:async()=>{if(r)try{l(!0),await w.deleteById(r.id),y(!1),a(null),await k()}catch(e){d(e instanceof Error?e.message:"删除MCP服务器失败")}finally{l(!1)}},disabled:n,children:"删除"})]}),children:C.jsx("div",{className:"text-center",children:C.jsxs("div",{className:"mt-2",children:[C.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["确定要删除MCP服务器 ",C.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:r?.name})," 吗？"]}),C.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"此操作不可撤销，所有相关配置将被永久删除。"})]})})})]})}function Lt(){const[t,s]=m(Y),[r,a]=m(G),[n,l]=m(z),[i,d]=m(P),[c]=m(R),[o,x]=e.useState(!1),[h,u]=e.useState(!1),[g,y]=e.useState(!1),[p,j]=e.useState(!1),[f,b]=e.useState({}),[v,N]=e.useState({}),[w,k]=e.useState({}),E=new de;e.useEffect(()=>{_()},[c]);const _=async()=>{try{l(!0),d(null);const e=await E.list({limit:100});s(e)}catch(e){d(e instanceof Error?e.message:"加载配置列表失败")}finally{l(!1)}},S=e=>{const t={};return e.config_key?.trim()?/^[a-zA-Z][a-zA-Z0-9_]*$/.test(e.config_key)||(t.config_key="配置键只能包含字母、数字和下划线，且必须以字母开头"):t.config_key="配置键不能为空",void 0!==e.config_value&&null!==e.config_value||(t.config_value="配置值不能为空"),e.category?.trim()||(t.category="分类不能为空"),t},I=()=>{b({}),N({})},M=e=>{a(e),b({...e}),N({}),u(!0)},T=(e,t=50)=>e.length<=t?e:e.substring(0,t)+"...",A=e=>({system:"⚙️",api:"🔌",database:"🗄️",security:"🔐",ui:"🎨",performance:"⚡",logging:"📝",network:"🌐"}[e]||"📋"),O=[{key:"config_key",title:"配置键",render:e=>C.jsxs("div",{className:"flex items-center",children:[C.jsx("span",{className:"text-lg mr-2",children:A(e.category)}),C.jsxs("div",{children:[C.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white font-mono",children:e.config_key}),C.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:e.category})]})]})},{key:"config_value",title:"配置值",render:e=>C.jsxs("div",{className:"max-w-md",children:[C.jsx("code",{className:"text-sm bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded text-gray-900 dark:text-white",children:T(e.config_value)}),e.config_value.length>50&&C.jsx(yt,{variant:"ghost",size:"sm",onClick:()=>M(e),className:"mt-1 p-0 text-xs",children:"查看完整值"})]})},{key:"description",title:"描述",render:e=>C.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 max-w-xs",children:e.description||"-"})},{key:"status",title:"状态",render:e=>C.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium "+(e.is_enabled?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"),children:e.is_enabled?"已启用":"已禁用"})},{key:"updated_at",title:"更新时间",render:e=>C.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:new Date(e.updated_at).toLocaleDateString("zh-CN")})},{key:"actions",title:"操作",render:e=>C.jsxs("div",{className:"flex items-center space-x-2",children:[C.jsx(yt,{variant:e.is_enabled?"warning":"success",size:"sm",onClick:()=>(async e=>{try{l(!0),await E.update(e.id,{is_enabled:!e.is_enabled}),await _()}catch(t){d(t instanceof Error?t.message:"切换启用状态失败")}finally{l(!1)}})(e),disabled:n,children:e.is_enabled?"禁用":"启用"}),C.jsx(yt,{variant:"primary",size:"sm",onClick:()=>M(e),disabled:n,children:C.jsx(It.Edit,{className:"h-4 w-4"})}),C.jsx(yt,{variant:"danger",size:"sm",onClick:()=>(e=>{a(e),y(!0)})(e),disabled:n,children:C.jsx(It.Trash2,{className:"h-4 w-4"})})]})}],L=t?.data?t.data.reduce((e,t)=>{const s=t.category;return e[s]||(e[s]={total:0,enabled:0}),e[s].total++,t.is_enabled&&e[s].enabled++,e},{}):{};return C.jsxs("div",{className:"space-y-6",children:[C.jsxs("div",{className:"flex items-center justify-between",children:[C.jsxs("div",{children:[C.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"通用配置管理"}),C.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"管理系统的各种配置参数，包括API设置、数据库连接、安全配置等"})]}),C.jsxs("div",{className:"flex items-center space-x-3",children:[C.jsxs(yt,{variant:"secondary",onClick:()=>{const e={};t?.data?.forEach(t=>{e[t.id.toString()]=t.config_value}),k(e),j(!0)},disabled:n||!t?.data?.length,className:"flex items-center space-x-2",children:[C.jsx(It.Settings,{className:"h-4 w-4"}),C.jsx("span",{children:"批量编辑"})]}),C.jsxs(yt,{variant:"primary",onClick:()=>{I(),b({is_enabled:!0}),x(!0)},disabled:n,className:"flex items-center space-x-2",children:[C.jsx(It.Plus,{className:"h-4 w-4"}),C.jsx("span",{children:"添加配置"})]})]})]}),C.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[C.jsxs(jt,{children:[C.jsx(jt.Header,{children:C.jsx(jt.Title,{children:"总配置数"})}),C.jsx(jt.Content,{children:C.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:t?.total||0})})]}),C.jsxs(jt,{children:[C.jsx(jt.Header,{children:C.jsx(jt.Title,{children:"已启用"})}),C.jsx(jt.Content,{children:C.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:t?.data?.filter(e=>e.is_enabled).length||0})})]}),C.jsxs(jt,{children:[C.jsx(jt.Header,{children:C.jsx(jt.Title,{children:"配置分类"})}),C.jsx(jt.Content,{children:C.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:Object.keys(L).length})})]}),C.jsxs(jt,{children:[C.jsx(jt.Header,{children:C.jsx(jt.Title,{children:"启用率"})}),C.jsx(jt.Content,{children:C.jsxs("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:[t?.data?.length?Math.round(t.data.filter(e=>e.is_enabled).length/t.data.length*100):0,"%"]})})]})]}),Object.keys(L).length>0&&C.jsxs(jt,{children:[C.jsx(jt.Header,{children:C.jsx(jt.Title,{children:"分类统计"})}),C.jsx(jt.Content,{children:C.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Object.entries(L).map(([e,t])=>C.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[C.jsxs("div",{className:"flex items-center",children:[C.jsx("span",{className:"text-lg mr-2",children:A(e)}),C.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white capitalize",children:e})]}),C.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[C.jsx("span",{className:"font-medium text-green-600 dark:text-green-400",children:t.enabled}),C.jsx("span",{className:"mx-1",children:"/"}),C.jsx("span",{children:t.total})]})]},e))})})]}),C.jsxs(jt,{children:[C.jsx(jt.Header,{children:C.jsx(jt.Title,{children:"配置列表"})}),C.jsx(jt.Content,{children:C.jsx(Et,{data:t?.data||[],columns:O,loading:n,emptyState:{title:"暂无配置",description:'请点击"添加配置"按钮来创建第一个系统配置'}})})]}),C.jsx(wt,{isOpen:o,onClose:()=>x(!1),title:"添加系统配置",footer:C.jsxs("div",{className:"flex justify-end space-x-3",children:[C.jsx(yt,{variant:"secondary",onClick:()=>x(!1),disabled:n,children:"取消"}),C.jsx(yt,{variant:"primary",onClick:async()=>{const e=S(f);if(Object.keys(e).length>0)N(e);else try{l(!0),await E.create(f),x(!1),I(),await _()}catch(t){d(t instanceof Error?t.message:"创建配置失败")}finally{l(!1)}},disabled:n,children:"创建"})]}),children:C.jsxs("div",{className:"space-y-4",children:[C.jsx(Ct,{label:"配置键",value:f.config_key||"",onChange:e=>b(t=>({...t,config_key:e})),placeholder:"API_TIMEOUT",error:v.config_key,required:!0,help:"只能包含字母、数字和下划线，且必须以字母开头"}),C.jsx(Ct,{label:"分类",value:f.category||"",onChange:e=>b(t=>({...t,category:e})),placeholder:"system",error:v.category,required:!0,help:"如：system, api, database, security, ui等"}),C.jsxs("div",{className:"space-y-2",children:[C.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:["配置值 ",C.jsx("span",{className:"text-red-500",children:"*"})]}),C.jsx("textarea",{value:f.config_value||"",onChange:e=>b(t=>({...t,config_value:e.target.value})),placeholder:"请输入配置值...",rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white font-mono text-sm "+(v.config_value?"border-red-500":"")}),v.config_value&&C.jsx("p",{className:"text-sm text-red-500",children:v.config_value})]}),C.jsxs("div",{className:"space-y-2",children:[C.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"描述"}),C.jsx("textarea",{value:f.description||"",onChange:e=>b(t=>({...t,description:e.target.value})),placeholder:"请输入配置描述（可选）...",rows:2,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]})]})}),C.jsx(wt,{isOpen:h,onClose:()=>u(!1),title:"编辑系统配置",footer:C.jsxs("div",{className:"flex justify-end space-x-3",children:[C.jsx(yt,{variant:"secondary",onClick:()=>u(!1),disabled:n,children:"取消"}),C.jsx(yt,{variant:"primary",onClick:async()=>{if(!r)return;const e=S(f);if(Object.keys(e).length>0)N(e);else try{l(!0),await E.update(r.id,f),u(!1),a(null),I(),await _()}catch(t){d(t instanceof Error?t.message:"更新配置失败")}finally{l(!1)}},disabled:n,children:"保存"})]}),children:C.jsxs("div",{className:"space-y-4",children:[C.jsx(Ct,{label:"配置键",value:f.config_key||"",onChange:e=>b(t=>({...t,config_key:e})),placeholder:"API_TIMEOUT",error:v.config_key,required:!0,disabled:!0}),C.jsx(Ct,{label:"分类",value:f.category||"",onChange:e=>b(t=>({...t,category:e})),placeholder:"system",error:v.category,required:!0}),C.jsxs("div",{className:"space-y-2",children:[C.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:["配置值 ",C.jsx("span",{className:"text-red-500",children:"*"})]}),C.jsx("textarea",{value:f.config_value||"",onChange:e=>b(t=>({...t,config_value:e.target.value})),placeholder:"请输入配置值...",rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white font-mono text-sm "+(v.config_value?"border-red-500":"")}),v.config_value&&C.jsx("p",{className:"text-sm text-red-500",children:v.config_value})]}),C.jsxs("div",{className:"space-y-2",children:[C.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"描述"}),C.jsx("textarea",{value:f.description||"",onChange:e=>b(t=>({...t,description:e.target.value})),placeholder:"请输入配置描述（可选）...",rows:2,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]})]})}),C.jsx(wt,{isOpen:p,onClose:()=>j(!1),title:"批量编辑配置",size:"lg",footer:C.jsxs("div",{className:"flex justify-end space-x-3",children:[C.jsx(yt,{variant:"secondary",onClick:()=>j(!1),disabled:n,children:"取消"}),C.jsxs(yt,{variant:"primary",onClick:async()=>{try{l(!0);const e=Object.entries(w).map(([e,t])=>E.update(parseInt(e),{config_value:t}));await Promise.all(e),j(!1),k({}),await _()}catch(e){d(e instanceof Error?e.message:"批量保存配置失败")}finally{l(!1)}},disabled:n,className:"flex items-center space-x-2",children:[C.jsx(It.Save,{className:"h-4 w-4"}),C.jsx("span",{children:"批量保存"})]})]}),children:C.jsx("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:t?.data?.map(e=>C.jsxs("div",{className:"space-y-2",children:[C.jsx("div",{className:"flex items-center justify-between",children:C.jsxs("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:[A(e.category)," ",e.config_key,C.jsxs("span",{className:"ml-2 text-xs text-gray-500",children:["(",e.category,")"]})]})}),C.jsx("textarea",{value:w[e.id.toString()]||"",onChange:t=>k(s=>({...s,[e.id.toString()]:t.target.value})),rows:2,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white font-mono text-sm"}),e.description&&C.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:e.description})]},e.id))})}),C.jsx(wt,{isOpen:g,onClose:()=>y(!1),title:"删除配置",size:"sm",footer:C.jsxs("div",{className:"flex justify-end space-x-3",children:[C.jsx(yt,{variant:"secondary",onClick:()=>y(!1),disabled:n,children:"取消"}),C.jsx(yt,{variant:"danger",onClick:async()=>{if(r)try{l(!0),await E.deleteById(r.id),y(!1),a(null),await _()}catch(e){d(e instanceof Error?e.message:"删除配置失败")}finally{l(!1)}},disabled:n,children:"删除"})]}),children:C.jsx("div",{className:"text-center",children:C.jsxs("div",{className:"mt-2",children:[C.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["确定要删除配置 ",C.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:r?.config_key})," 吗？"]}),C.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"此操作不可撤销，配置将被永久删除。"})]})})})]})}function zt(){const[t,s]=m(A),[r,a]=m(L),[n,l]=e.useState(!1),[i,d]=e.useState(null),[c,o]=e.useState("general");e.useEffect(()=>{x()},[]);const x=async()=>{try{l(!0);const e=await ue.getInfo();d(e)}catch(e){}finally{l(!1)}},h=e=>{s(e);const t={id:Date.now().toString(),type:"success",title:"主题已更改",message:`已切换到${"light"===e?"浅色":"dark"===e?"深色":"跟随系统"}主题`,duration:3e3};a(e=>[...e,t])},u=[{id:"general",name:"常规设置",icon:It.Cog},{id:"appearance",name:"外观设置",icon:It.Palette},{id:"notifications",name:"通知设置",icon:It.Bell},{id:"system",name:"系统信息",icon:It.Database}];return C.jsxs("div",{className:"space-y-6",children:[C.jsxs("div",{children:[C.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"系统设置"}),C.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"配置应用程序的各项设置和偏好"})]}),C.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:C.jsx("nav",{className:"-mb-px flex space-x-8",children:u.map(e=>{const t=e.icon;return C.jsxs("button",{onClick:()=>o(e.id),className:"flex items-center py-2 px-1 border-b-2 font-medium text-sm "+(c===e.id?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"),children:[C.jsx(t,{className:"h-5 w-5 mr-2"}),e.name]},e.id)})})}),C.jsxs("div",{className:"space-y-6",children:["general"===c&&C.jsxs("div",{className:"space-y-6",children:[C.jsxs(jt,{children:[C.jsxs(jt.Header,{children:[C.jsx(jt.Title,{children:"常规设置"}),C.jsx(jt.Description,{children:"配置应用程序的基本行为和功能"})]}),C.jsxs(jt.Content,{className:"space-y-4",children:[C.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[C.jsxs("div",{children:[C.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"语言设置"}),C.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",children:[C.jsx("option",{value:"zh-CN",children:"简体中文"}),C.jsx("option",{value:"en-US",children:"English"})]})]}),C.jsxs("div",{children:[C.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"时区设置"}),C.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",children:[C.jsx("option",{value:"Asia/Shanghai",children:"Asia/Shanghai (UTC+8)"}),C.jsx("option",{value:"UTC",children:"UTC (UTC+0)"})]})]})]}),C.jsxs("div",{children:[C.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"自动保存间隔"}),C.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",children:[C.jsx("option",{value:"30",children:"30秒"}),C.jsx("option",{value:"60",children:"1分钟"}),C.jsx("option",{value:"300",children:"5分钟"}),C.jsx("option",{value:"0",children:"禁用自动保存"})]})]})]})]}),C.jsxs(jt,{children:[C.jsxs(jt.Header,{children:[C.jsx(jt.Title,{children:"数据管理"}),C.jsx(jt.Description,{children:"管理应用程序数据和缓存"})]}),C.jsxs(jt.Content,{className:"space-y-4",children:[C.jsxs("div",{className:"flex items-center justify-between",children:[C.jsxs("div",{children:[C.jsx("h3",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"清除缓存"}),C.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"清除应用程序缓存以释放存储空间"})]}),C.jsx(yt,{variant:"secondary",size:"sm",children:"清除缓存"})]}),C.jsxs("div",{className:"flex items-center justify-between",children:[C.jsxs("div",{children:[C.jsx("h3",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"重置设置"}),C.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"将所有设置恢复为默认值"})]}),C.jsx(yt,{variant:"warning",size:"sm",children:"重置设置"})]})]})]})]}),"appearance"===c&&C.jsxs("div",{className:"space-y-6",children:[C.jsxs(jt,{children:[C.jsxs(jt.Header,{children:[C.jsx(jt.Title,{children:"主题设置"}),C.jsx(jt.Description,{children:"选择应用程序的外观主题"})]}),C.jsx(jt.Content,{children:C.jsx("div",{className:"space-y-4",children:C.jsxs("div",{children:[C.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"选择主题"}),C.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[C.jsxs("button",{onClick:()=>h("light"),className:"p-4 border-2 rounded-lg text-center "+("light"===t?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-600 hover:border-gray-300 dark:hover:border-gray-500"),children:[C.jsx("div",{className:"w-8 h-8 mx-auto mb-2 bg-white border border-gray-300 rounded"}),C.jsx("div",{className:"text-sm font-medium",children:"浅色主题"})]}),C.jsxs("button",{onClick:()=>h("dark"),className:"p-4 border-2 rounded-lg text-center "+("dark"===t?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-600 hover:border-gray-300 dark:hover:border-gray-500"),children:[C.jsx("div",{className:"w-8 h-8 mx-auto mb-2 bg-gray-800 border border-gray-600 rounded"}),C.jsx("div",{className:"text-sm font-medium",children:"深色主题"})]}),C.jsxs("button",{onClick:()=>h("system"),className:"p-4 border-2 rounded-lg text-center "+("system"===t?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-600 hover:border-gray-300 dark:hover:border-gray-500"),children:[C.jsx("div",{className:"w-8 h-8 mx-auto mb-2 bg-gradient-to-br from-white to-gray-800 border border-gray-400 rounded"}),C.jsx("div",{className:"text-sm font-medium",children:"跟随系统"})]})]})]})})})]}),C.jsxs(jt,{children:[C.jsxs(jt.Header,{children:[C.jsx(jt.Title,{children:"字体设置"}),C.jsx(jt.Description,{children:"配置应用程序的字体显示"})]}),C.jsx(jt.Content,{className:"space-y-4",children:C.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[C.jsxs("div",{children:[C.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"字体系列"}),C.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",children:[C.jsx("option",{value:"system",children:"系统默认"}),C.jsx("option",{value:"sans",children:"无衬线字体"}),C.jsx("option",{value:"serif",children:"衬线字体"}),C.jsx("option",{value:"mono",children:"等宽字体"})]})]}),C.jsxs("div",{children:[C.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"字体大小"}),C.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",children:[C.jsx("option",{value:"small",children:"小"}),C.jsx("option",{value:"medium",children:"中"}),C.jsx("option",{value:"large",children:"大"}),C.jsx("option",{value:"extra-large",children:"特大"})]})]})]})})]})]}),"notifications"===c&&C.jsx("div",{className:"space-y-6",children:C.jsxs(jt,{children:[C.jsxs(jt.Header,{children:[C.jsx(jt.Title,{children:"通知设置"}),C.jsx(jt.Description,{children:"配置应用程序的通知行为"})]}),C.jsxs(jt.Content,{className:"space-y-4",children:[C.jsxs("div",{className:"space-y-4",children:[C.jsxs("div",{className:"flex items-center justify-between",children:[C.jsxs("div",{children:[C.jsx("h3",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"启用通知"}),C.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"允许应用程序显示通知消息"})]}),C.jsx("input",{type:"checkbox",defaultChecked:!0,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"})]}),C.jsxs("div",{className:"flex items-center justify-between",children:[C.jsxs("div",{children:[C.jsx("h3",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"声音提醒"}),C.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"在显示通知时播放声音"})]}),C.jsx("input",{type:"checkbox",defaultChecked:!1,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"})]}),C.jsxs("div",{className:"flex items-center justify-between",children:[C.jsxs("div",{children:[C.jsx("h3",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"桌面通知"}),C.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"显示系统桌面通知"})]}),C.jsx("input",{type:"checkbox",defaultChecked:!0,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"})]})]}),C.jsxs("div",{className:"pt-4 border-t border-gray-200 dark:border-gray-700",children:[C.jsxs("div",{className:"flex items-center space-x-3",children:[C.jsx(yt,{variant:"primary",onClick:()=>{const e={id:Date.now().toString(),type:"info",title:"测试通知",message:"这是一个测试通知，用于验证通知系统是否正常工作",duration:5e3};a(t=>[...t,e])},children:"测试通知"}),C.jsx(yt,{variant:"secondary",onClick:()=>{a([])},children:"清除所有通知"})]}),C.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:["当前通知数量: ",r.length]})]})]})]})}),"system"===c&&C.jsxs("div",{className:"space-y-6",children:[C.jsxs(jt,{children:[C.jsxs(jt.Header,{children:[C.jsx(jt.Title,{children:"系统信息"}),C.jsx(jt.Description,{children:"查看应用程序和系统的详细信息"})]}),C.jsx(jt.Content,{children:n?C.jsxs("div",{className:"text-center py-4",children:[C.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),C.jsx("p",{className:"mt-2 text-sm text-gray-500 dark:text-gray-400",children:"加载中..."})]}):i?C.jsxs("div",{className:"space-y-4",children:[C.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[C.jsxs("div",{children:[C.jsx("h3",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"应用版本"}),C.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:i.version||"1.0.0"})]}),C.jsxs("div",{children:[C.jsx("h3",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"构建时间"}),C.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:i.buildTime||"未知"})]}),C.jsxs("div",{children:[C.jsx("h3",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"运行环境"}),C.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:i.environment||"development"})]}),C.jsxs("div",{children:[C.jsx("h3",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"数据库状态"}),C.jsx("p",{className:"text-sm text-green-600 dark:text-green-400",children:"连接正常"})]})]}),C.jsx("div",{className:"pt-4 border-t border-gray-200 dark:border-gray-700",children:C.jsx("div",{className:"flex items-center space-x-3",children:C.jsx(yt,{variant:"secondary",onClick:x,children:"刷新信息"})})})]}):C.jsxs("div",{className:"text-center py-4",children:[C.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"无法加载系统信息"}),C.jsx(yt,{variant:"primary",onClick:x,className:"mt-2",children:"重试"})]})})]}),C.jsxs(jt,{children:[C.jsxs(jt.Header,{children:[C.jsx(jt.Title,{children:"关于"}),C.jsx(jt.Description,{children:"关于AI Manager应用程序"})]}),C.jsx(jt.Content,{children:C.jsxs("div",{className:"space-y-4",children:[C.jsxs("div",{children:[C.jsx("h3",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"AI Manager"}),C.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"一个强大的AI管理工具，用于管理和配置各种AI服务提供商"})]}),C.jsx("div",{className:"pt-4 border-t border-gray-200 dark:border-gray-700",children:C.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[C.jsxs("div",{children:[C.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:"技术栈"}),C.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Rust + Tauri + React"})]}),C.jsxs("div",{children:[C.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:"许可证"}),C.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"MIT"})]}),C.jsxs("div",{children:[C.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:"作者"}),C.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"AI Manager Team"})]})]})})]})})]})]})]})]})}const Pt=({children:t})=>{const[s]=m(A);return e.useEffect(()=>{"dark"===s?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[s]),C.jsx(C.Fragment,{children:t})},Rt=()=>{const[t,s]=m(L);e.useEffect(()=>{const e=setInterval(()=>{s(e=>e.filter(e=>!e.duration||e.persistent))},1e3);return()=>clearInterval(e)},[s]);return C.jsx("div",{className:"fixed bottom-4 right-4 z-50 space-y-2",children:t.map(e=>C.jsx("div",{className:"max-w-sm rounded-lg shadow-lg p-4 transform transition-all duration-300 "+("success"===e.type?"bg-green-50 border-green-200 text-green-800":"error"===e.type?"bg-red-50 border-red-200 text-red-800":"warning"===e.type?"bg-yellow-50 border-yellow-200 text-yellow-800":"bg-blue-50 border-blue-200 text-blue-800"),children:C.jsxs("div",{className:"flex",children:[C.jsxs("div",{className:"flex-shrink-0",children:["success"===e.type&&C.jsx("svg",{className:"h-5 w-5 text-green-400",fill:"currentColor",viewBox:"0 0 20 20",children:C.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000-16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 12.293a1 1 0 01-1.414 0l-5.586-5.586a1 1 0 010-1.414l6.293 6.293a1 1 0 001.414-1.414z",clipRule:"evenodd"})}),"error"===e.type&&C.jsx("svg",{className:"h-5 w-5 text-red-400",fill:"currentColor",viewBox:"0 0 20 20",children:C.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000-16zM8.707 7.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 01-1.414 1.414l2 2a1 1 0 001.414 0l4-4a1 1 0 001.414-1.414l-4-4a1 1 0 00-1.414 0z",clipRule:"evenodd"})}),"warning"===e.type&&C.jsx("svg",{className:"h-5 w-5 text-yellow-400",fill:"currentColor",viewBox:"0 0 20 20",children:C.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 3.48l-5.58-9.92zM11.43 8.536a1 1 0 10-1.414 0L8.014 9.144a1 1 0 10-1.414 0l3.414-3.414z",clipRule:"evenodd"})}),"info"===e.type&&C.jsx("svg",{className:"h-5 w-5 text-blue-400",fill:"currentColor",viewBox:"0 0 20 20",children:C.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 001-1v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})]}),C.jsxs("div",{className:"ml-3",children:[C.jsx("p",{className:"text-sm font-medium",children:e.title}),C.jsx("p",{className:"text-sm",children:e.message})]}),C.jsx("button",{onClick:()=>{return t=e.id,void s(e=>e.filter(e=>e.id!==t));var t},className:"ml-auto -mx-1.5 -my-1.5 rounded-lg p-1 hover:bg-gray-100",children:C.jsx("svg",{className:"h-4 w-4",fill:"currentColor",viewBox:"0 0 20 20",children:C.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L10 10.414l4.293 4.293a1 1 0 01-1.414 0L10 11.814l-4.293 4.293a1 1 0 01-1.414-1.414L10 13.414l-4.293-4.293a1 1 0 010-1.414z",clipRule:"evenodd"})})})]})},e.id))})},Ht=()=>(e.useEffect(()=>{(async()=>{try{await ue.getInfo()}catch(e){}})()},[]),null);function $t(){return C.jsx(h,{children:C.jsxs(Pt,{children:[C.jsx(Ht,{}),C.jsx(Rt,{}),C.jsx(l,{children:C.jsx(ot,{children:C.jsxs(i,{children:[C.jsx(d,{path:"/",element:C.jsx(c,{to:"/dashboard",replace:!0})}),C.jsx(d,{path:"/dashboard",element:C.jsx(St,{})}),C.jsx(d,{path:"/claude-providers",element:C.jsx(Mt,{})}),C.jsx(d,{path:"/codex-providers",element:C.jsx(Tt,{})}),C.jsx(d,{path:"/agent-guides",element:C.jsx(At,{})}),C.jsx(d,{path:"/mcp-servers",element:C.jsx(Ot,{})}),C.jsx(d,{path:"/common-configs",element:C.jsx(Lt,{})}),C.jsx(d,{path:"/settings",element:C.jsx(zt,{})})]})})})]})})}E.createRoot(document.getElementById("root")).render(C.jsx(s.StrictMode,{children:C.jsx($t,{})}));
